function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var t=0;t<n.length;t++){var s=n[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{TdLt:function(e,n,t){"use strict";t.r(n),t.d(n,"MessagesModule",(function(){return v}));var s=t("PCNd"),r=t("TEn/"),o=t("mrSG"),a=t("N7YL"),i=t("ZjcB"),c=t("fXoL"),u=t("tyNb"),l=t("ofXK"),b=function(e){return{"no-messages":e}};function f(e,n){if(1&e){var t=c.Rb();c.Qb(0,"ion-item",3),c.Yb("click",(function(){c.mc(t);var e=n.$implicit;return c.ac().openMessage(e)})),c.Qb(1,"ion-badge",4),c.rc(2),c.Pb(),c.Qb(3,"ion-label"),c.Qb(4,"span"),c.Qb(5,"b"),c.rc(6),c.Pb(),c.Pb(),c.Qb(7,"p"),c.Qb(8,"small"),c.rc(9),c.bc(10,"date"),c.Pb(),c.Pb(),c.Qb(11,"p"),c.Qb(12,"small"),c.Qb(13,"b"),c.rc(14),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb()}if(2&e){var s=n.$implicit,r=c.ac();c.zb(1),c.ic("color",0===r.unreadCount(s)?"":"success"),c.hc("ngClass",c.jc(9,b,0===r.unreadCount(s))),c.zb(1),c.tc(" ",r.unreadCount(s)>9?"+9":r.unreadCount(s)," "),c.zb(4),c.sc(s.user.name),c.zb(3),c.tc(" Ostatnia wiadomosc z: ",c.dc(10,6,r.lastMessageTimeInMs(s),"M/d/yy, hh:mm:ss")," "),c.zb(5),c.tc(" ",r.lastMessage(s).content," ")}}var m,p,d,g=[{path:"",component:(m=function(){function e(n,t,s){var r=this;_classCallCheck(this,e),this._messagesService=n,this._modalController=t,this._router=s,this.lastMessage=function(e){return!!e.messages[e.messages.length-1]&&e.messages[e.messages.length-1]},this.lastMessageTimeInMs=function(e){return 1e3*r.lastMessage(e).creationDate},this.unreadCount=function(e){return e.messages.filter((function(e){return!e.readDate&&e.isResponse})).length},this.openMessage=function(e){return Object(o.a)(r,void 0,void 0,regeneratorRuntime.mark((function n(){var t;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this._modalController.create({component:i.a,componentProps:{conversation:e}});case 2:return t=n.sent,e.messages.filter((function(e){return!e.readDate})).forEach((function(e){return e.readDate=(new Date).getTime()})),n.next=6,t.present();case 6:return n.abrupt("return",n.sent);case 7:case"end":return n.stop()}}),n,this)})))}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this._router.events.subscribe((function(){"/zakladki/wiadomosci"===e._router.url&&e.conversations.filter((function(e){return!e.viewDate})).forEach((function(e){return e.viewDate=(new Date).getTime()}))}))}},{key:"conversations",get:function(){return this._messagesService.conversations}}]),e}(),m.\u0275fac=function(e){return new(e||m)(c.Lb(a.a),c.Lb(r.K),c.Lb(u.g))},m.\u0275cmp=c.Fb({type:m,selectors:[["ng-component"]],decls:7,vars:1,consts:[["fullScreen",""],["lines","none",1,"conversations-list"],["class","conversation",3,"click",4,"ngFor","ngForOf"],[1,"conversation",3,"click"],["slot","start",3,"ngClass","color"]],template:function(e,n){1&e&&(c.Qb(0,"ion-header"),c.Qb(1,"ion-toolbar"),c.Qb(2,"ion-title"),c.rc(3,"Moje wiadomo\u015bci"),c.Pb(),c.Pb(),c.Pb(),c.Qb(4,"ion-content",0),c.Qb(5,"ion-list",1),c.pc(6,f,15,11,"ion-item",2),c.Pb(),c.Pb()),2&e&&(c.zb(6),c.hc("ngForOf",n.conversations))},directives:[r.m,r.H,r.F,r.k,r.t,l.l,r.q,r.f,l.k,r.s],pipes:[l.e],encapsulation:2}),m)}],h=((d=function e(){_classCallCheck(this,e)}).\u0275mod=c.Jb({type:d}),d.\u0275inj=c.Ib({factory:function(e){return new(e||d)},imports:[[u.j.forChild(g)],u.j]}),d),v=((p=function e(){_classCallCheck(this,e)}).\u0275mod=c.Jb({type:p}),p.\u0275inj=c.Ib({factory:function(e){return new(e||p)},imports:[[l.b,r.I,h,s.a]]}),p)}}]);
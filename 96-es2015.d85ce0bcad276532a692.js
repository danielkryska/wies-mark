(window.webpackJsonp=window.webpackJsonp||[]).push([[96],{RmqX:function(t,e,o){"use strict";o.r(e),o.d(e,"SearchModule",(function(){return F}));var n=o("PCNd"),i=o("ofXK"),r=o("tyNb"),c=o("mrSG"),s=o("hKYS"),a=o("co2y"),b=o("U5Sr"),l=o("DnKK"),u=o("azmC"),g=o("fXoL"),p=o("TEn/");function d(t,e){if(1&t){const t=g.Qb();g.Pb(0,"ion-item"),g.Pb(1,"ion-label",3),g.Xb("click",(function(){g.kc(t);const o=e.$implicit;return g.Zb(2).closeSelf(o.value)})),g.oc(2),g.Ob(),g.Ob()}if(2&t){const t=e.$implicit;g.zb(2),g.pc(t.label)}}function f(t,e){if(1&t&&(g.Nb(0),g.Pb(1,"ion-item-divider"),g.Pb(2,"ion-label"),g.oc(3),g.Ob(),g.Ob(),g.nc(4,d,3,1,"ion-item",1),g.Mb()),2&t){const t=e.$implicit;g.zb(3),g.pc(t.groupLabel),g.zb(1),g.fc("ngForOf",t.values)}}let h=(()=>{class t{constructor(t,e){this._sortTypesService=t,this._modalController=e,this.sortTypes=[],this.closeSelf=(t=null)=>this._modalController.dismiss(t),this._sortTypesService.sortTypes$.pipe(Object(l.a)(this)).subscribe(t=>this.sortTypes=t)}ngOnDestroy(){}}return t.\u0275fac=function(e){return new(e||t)(g.Kb(u.a),g.Kb(p.x))},t.\u0275cmp=g.Eb({type:t,selectors:[["app-sort-by"]],decls:9,vars:1,consts:[["lines","none"],[4,"ngFor","ngForOf"],["expand","block",3,"click"],[3,"click"]],template:function(t,e){1&t&&(g.Pb(0,"ion-list",0),g.Pb(1,"ion-list-header"),g.Pb(2,"h3"),g.oc(3,"Sortuj wed\u0142ug"),g.Ob(),g.Ob(),g.nc(4,f,5,2,"ng-container",1),g.Ob(),g.Pb(5,"ion-footer"),g.Pb(6,"ion-toolbar"),g.Pb(7,"ion-button",2),g.Xb("click",(function(){return e.closeSelf()})),g.oc(8,"Cofnij"),g.Ob(),g.Ob(),g.Ob()),2&t&&(g.zb(4),g.fc("ngForOf",e.sortTypes))},directives:[p.m,p.n,i.i,p.f,p.u,p.c,p.k,p.l,p.j],styles:["ion-list[_ngcontent-%COMP%]{padding:0!important}ion-list[_ngcontent-%COMP%]   ion-item-divider[_ngcontent-%COMP%]{--ion-background-color:#e9ecf0!important;color:#000}ion-footer[_ngcontent-%COMP%]{padding:10px}"]}),t})(),O=(()=>{class t{constructor(t){this._modalController=t,this.filters=[],this.applyFilters=()=>{},this.closeSelf=()=>this._modalController.dismiss({dismissed:!0})}}return t.\u0275fac=function(e){return new(e||t)(g.Kb(p.x))},t.\u0275cmp=g.Eb({type:t,selectors:[["app-filters"]],decls:15,vars:0,consts:[["fullscreen",""],[1,"modal-title"],[1,"close-self-btn",3,"click"],["href","javascript:void(0)"],["name","close-outline"],["position","floating"],["color","primary","expand","block"]],template:function(t,e){1&t&&(g.Pb(0,"ion-content",0),g.Pb(1,"ion-toolbar"),g.Pb(2,"span",1),g.oc(3,"Filtry"),g.Ob(),g.Pb(4,"button",2),g.Xb("click",(function(){return e.closeSelf()})),g.Pb(5,"a",3),g.Lb(6,"ion-icon",4),g.Ob(),g.Ob(),g.Ob(),g.Pb(7,"ion-item"),g.Pb(8,"ion-label",5),g.oc(9,"Floating Label"),g.Ob(),g.Lb(10,"ion-input"),g.Ob(),g.Pb(11,"ion-footer"),g.Pb(12,"ion-toolbar"),g.Pb(13,"ion-button",6),g.oc(14," Filtruj "),g.Ob(),g.Ob(),g.Ob(),g.Ob())},directives:[p.e,p.u,p.h,p.j,p.l,p.i,p.A,p.f,p.c],styles:["ion-content[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{padding:10px}ion-content[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .close-self-btn[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]{background-color:transparent;padding:10px;font-size:larger}ion-content[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .close-self-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-size:larger}ion-content[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .close-self-btn[_ngcontent-%COMP%]{top:0;right:0;position:absolute}ion-content[_ngcontent-%COMP%]   ion-footer[_ngcontent-%COMP%]{bottom:0;position:fixed}"]}),t})();var P=o("2qjx"),C=o("+Efk"),y=o("ioEP");const m=["searchbar"],_=function(){return["/zakladki/szukaj"]},v=function(t){return{selectedCategory:t}};function k(t,e){if(1&t&&(g.Pb(0,"a",8),g.Pb(1,"ion-item"),g.oc(2),g.Ob(),g.Ob()),2&t){const t=e.$implicit;g.fc("routerLink",g.hc(3,_))("queryParams",g.ic(4,v,t.value)),g.zb(2),g.qc(" ",t.label," ")}}function M(t,e){if(1&t){const t=g.Qb();g.Nb(0),g.Pb(1,"ion-header",1),g.Pb(2,"ion-searchbar",2,3),g.Xb("ionChange",(function(e){return g.kc(t),g.Zb().searchForCategory(e)}))("ionClear",(function(){return g.kc(t),g.Zb().clearProposedCategories()})),g.Ob(),g.Ob(),g.Pb(4,"ion-content"),g.Pb(5,"ion-list",4),g.nc(6,k,3,6,"a",5),g.Ob(),g.Ob(),g.Pb(7,"ion-footer",6),g.Pb(8,"ion-toolbar"),g.Lb(9,"app-categories-bar",7),g.Ob(),g.Ob(),g.Mb()}if(2&t){const t=g.Zb();g.zb(6),g.fc("ngForOf",t.proposedCategories),g.zb(3),g.fc("categories",t.categories)}}function j(t,e){if(1&t){const t=g.Qb();g.Nb(0),g.Pb(1,"ion-header"),g.Pb(2,"ion-toolbar"),g.Pb(3,"ion-row"),g.Pb(4,"ion-col"),g.Pb(5,"button",9),g.Pb(6,"a",10),g.Xb("click",(function(){return g.kc(t),g.Zb().openCategories()})),g.oc(7,"Kategorie"),g.Ob(),g.Ob(),g.Ob(),g.Pb(8,"ion-col"),g.Pb(9,"button",11),g.Xb("click",(function(){return g.kc(t),g.Zb().openFilters()})),g.Pb(10,"a",12),g.oc(11,"Filtry"),g.Ob(),g.Ob(),g.Ob(),g.Pb(12,"ion-col"),g.Pb(13,"button",11),g.Xb("click",(function(){return g.kc(t),g.Zb().openSortBy()})),g.Pb(14,"a",12),g.oc(15,"Sortuj"),g.Ob(),g.Ob(),g.Ob(),g.Ob(),g.Ob(),g.Ob(),g.Pb(16,"ion-content",13),g.Lb(17,"app-products-section",14),g.Ob(),g.Mb()}if(2&t){const t=g.Zb();g.zb(17),g.fc("title","Produkty z kategori: "+t.actualCategory.label)("products",t.marketProducts)}}const S=[{path:"",component:(()=>{class t{constructor(t,e,o,n,i){this._productsService=t,this._categoriesService=e,this._modalController=o,this._activatedRoute=n,this._location=i,this.categories=[],this.proposedCategories=[],this._flatCategories=[],this.clearProposedCategories=()=>this.proposedCategories=[]}ngOnInit(){this._productsService.getProducts().pipe(Object(l.a)(this)).subscribe(t=>{this.marketProducts=t}),this._categoriesService.categories$.pipe(Object(l.a)(this)).subscribe(t=>this.categories=t),this._activatedRoute.queryParamMap.pipe(Object(l.a)(this)).subscribe(t=>Object(c.a)(this,void 0,void 0,(function*(){const e=t.get("selectedCategory");if(e&&this.actualCategory&&this.actualCategory.value===e||!e)return this.parentCategory=null,void(this.actualCategory=null);e&&(this.parentCategory=yield this._categoriesService.findParentCategoryBy(e),this.actualCategory=yield this._categoriesService.findCategoryBy(e),this._productsService.getProducts([t=>Object(b.c)(t.category,this.actualCategory)],a.a).pipe(Object(l.a)(this)).subscribe(t=>{this.marketProducts=t}),this._location.replaceState("zakladki/szukaj"))}))),this._categoriesService.flatCategories$.pipe(Object(l.a)(this)).subscribe(t=>this._flatCategories=t)}searchForCategory(t){const e=t.target.value;e&&""!==e.trim()?this.proposedCategories=this._flatCategories.filter(t=>t.label.toLocaleLowerCase().indexOf(e)>-1).slice(0,10):this.clearProposedCategories()}ionViewDidEnter(){setTimeout(()=>{this.searchbar.setFocus()})}openFilters(){return Object(c.a)(this,void 0,void 0,(function*(){const t=yield this._modalController.create({component:O});return yield t.present()}))}openCategories(){return Object(c.a)(this,void 0,void 0,(function*(){const t=yield this._modalController.create({component:s.a,componentProps:{actualCategory:this.parentCategory,categories:this.categories}});return yield t.present()}))}openSortBy(){return Object(c.a)(this,void 0,void 0,(function*(){const t=yield this._modalController.create({component:h});return t.onDidDismiss().then(t=>{this.actualSortType=t.data,this._productsService.getProducts(this.actualCategory?[t=>Object(b.c)(t.category,this.actualCategory)]:[],this.actualSortType).pipe(Object(l.a)(this)).subscribe(t=>{this.marketProducts=t})}),yield t.present()}))}ngOnDestroy(){}}return t.\u0275fac=function(e){return new(e||t)(g.Kb(P.a),g.Kb(b.a),g.Kb(p.x),g.Kb(r.a),g.Kb(i.g))},t.\u0275cmp=g.Eb({type:t,selectors:[["app-search"]],viewQuery:function(t,e){var o;1&t&&g.sc(m,!0),2&t&&g.jc(o=g.Yb())&&(e.searchbar=o.first)},decls:2,vars:2,consts:[[4,"ngIf"],["no-border",""],["autocomplete","on","autocorrect","on","inputmode","text","placeholder","Jakiego produktu szukasz?","spellcheck","true","debounce","500",3,"ionChange","ionClear"],["searchbar",""],["lines","none"],[3,"routerLink","queryParams",4,"ngFor","ngForOf"],["no-border","","transparent",""],[3,"categories"],[3,"routerLink","queryParams"],[1,"header-btn"],["href","javascript:void(0)",3,"click"],[1,"header-btn",3,"click"],["href","javascript:void(0)"],["fullscreen",""],["sortBy","popularity","filters","[]",3,"title","products"]],template:function(t,e){1&t&&(g.nc(0,M,10,2,"ng-container",0),g.nc(1,j,18,2,"ng-container",0)),2&t&&(g.fc("ngIf",!e.actualCategory),g.zb(1),g.fc("ngIf",!!e.actualCategory))},directives:[i.j,p.g,p.q,p.A,p.e,p.m,i.i,p.f,p.u,C.a,r.i,p.z,p.j,p.p,p.d,y.a],styles:["ion-toolbar[_ngcontent-%COMP%]   .header-btn[_ngcontent-%COMP%]{background-color:transparent}ion-toolbar[_ngcontent-%COMP%]   .header-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-size:larger}ion-toolbar[_ngcontent-%COMP%]   .header-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:large}ion-header[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{text-align:center}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{color:green}"]}),t})()}];let z=(()=>{class t{}return t.\u0275mod=g.Ib({type:t}),t.\u0275inj=g.Hb({factory:function(e){return new(e||t)},imports:[[r.j.forChild(S)],r.j]}),t})(),F=(()=>{class t{}return t.\u0275mod=g.Ib({type:t}),t.\u0275inj=g.Hb({factory:function(e){return new(e||t)},imports:[[p.v,i.b,z,n.a]]}),t})()}}]);
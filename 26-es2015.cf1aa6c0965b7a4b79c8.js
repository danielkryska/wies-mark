(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{RmqX:function(t,e,n){"use strict";n.r(e),n.d(e,"SearchModule",(function(){return j}));var o=n("PCNd"),r=n("ofXK"),i=n("tyNb"),c=n("mrSG"),s=n("AB0y"),a=n("ngWF"),l=n("co2y"),b=n("U5Sr"),u=n("AytR"),p=n("fXoL"),d=n("tk/3");let f=(()=>{class t{constructor(t){this._http=t,this.sortTypes=[],this.sortTypes$.subscribe(t=>this.sortTypes=t)}get sortTypes$(){return this._http.get(`${u.a.API_URL}`).pipe(t=>t.sortTypes)}}return t.\u0275fac=function(e){return new(e||t)(p.Ub(d.a))},t.\u0275prov=p.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var h=n("TEn/");function g(t,e){if(1&t){const t=p.Rb();p.Qb(0,"ion-item"),p.Qb(1,"ion-label",6),p.Yb("click",(function(){p.mc(t);const n=e.$implicit;return p.ac(2).closeSelf(n.value)})),p.rc(2),p.Pb(),p.Pb()}if(2&t){const t=e.$implicit;p.zb(2),p.sc(t.label)}}function P(t,e){if(1&t&&(p.Ob(0),p.Qb(1,"ion-item-divider"),p.Qb(2,"ion-label"),p.rc(3),p.Pb(),p.Pb(),p.pc(4,g,3,1,"ion-item",4),p.Nb()),2&t){const t=e.$implicit;p.zb(3),p.sc(t.groupLabel),p.zb(1),p.hc("ngForOf",t.values)}}let y=(()=>{class t{constructor(t,e){this._sortTypesService=t,this._modalController=e,this.closeSelf=(t=null)=>this._modalController.dismiss(t)}get sortTypes(){return this._sortTypesService.sortTypes}}return t.\u0275fac=function(e){return new(e||t)(p.Lb(f),p.Lb(h.K))},t.\u0275cmp=p.Fb({type:t,selectors:[["app-sort-by"]],decls:16,vars:2,consts:[["slot","start"],[3,"defaultHref","click"],["fullscreen",""],["lines","none"],[4,"ngFor","ngForOf"],["expand","block",3,"click"],[3,"click"]],template:function(t,e){1&t&&(p.Qb(0,"ion-header"),p.Qb(1,"ion-toolbar"),p.Qb(2,"ion-buttons",0),p.Qb(3,"ion-back-button",1),p.Yb("click",(function(){return e.closeSelf()})),p.Pb(),p.Pb(),p.Qb(4,"ion-title"),p.rc(5,"Sortuj wedlug"),p.Pb(),p.Pb(),p.Pb(),p.Qb(6,"ion-content",2),p.Qb(7,"ion-list",3),p.Qb(8,"ion-list-header"),p.Qb(9,"h3"),p.rc(10,"Sortuj wed\u0142ug"),p.Pb(),p.Pb(),p.pc(11,P,5,2,"ng-container",4),p.Pb(),p.Pb(),p.Qb(12,"ion-footer"),p.Qb(13,"ion-toolbar"),p.Qb(14,"ion-button",5),p.Yb("click",(function(){return e.closeSelf()})),p.rc(15,"Cofnij"),p.Pb(),p.Pb(),p.Pb()),2&t&&(p.zb(3),p.hc("defaultHref",""),p.zb(8),p.hc("ngForOf",e.sortTypes))},directives:[h.m,h.H,h.h,h.d,h.e,h.F,h.k,h.t,h.u,r.l,h.l,h.g,h.r,h.s,h.q],styles:["ion-list[_ngcontent-%COMP%]{padding:0!important}ion-list[_ngcontent-%COMP%]   ion-item-divider[_ngcontent-%COMP%]{--ion-background-color:#e9ecf0!important;color:#000}ion-footer[_ngcontent-%COMP%]{padding:10px}"]}),t})(),m=(()=>{class t{constructor(t,e){this._searchService=t,this._modalController=e,this.filters={},this.applyFilters=()=>{},this.closeSelf=()=>this._modalController.dismiss({dismissed:!0})}}return t.\u0275fac=function(e){return new(e||t)(p.Lb(s.a),p.Lb(h.K))},t.\u0275cmp=p.Fb({type:t,selectors:[["app-filters"]],decls:16,vars:2,consts:[["slot","start"],[3,"defaultHref","click"],["fullscreen",""],["expand","block",3,"click"],["expand","block",3,"disabled"]],template:function(t,e){1&t&&(p.Qb(0,"ion-header"),p.Qb(1,"ion-toolbar"),p.Qb(2,"ion-buttons",0),p.Qb(3,"ion-back-button",1),p.Yb("click",(function(){return e.closeSelf()})),p.Pb(),p.Pb(),p.Qb(4,"ion-title"),p.rc(5,"Filtruj"),p.Pb(),p.Pb(),p.Pb(),p.Mb(6,"ion-content",2),p.Qb(7,"ion-footer"),p.Qb(8,"ion-toolbar"),p.Qb(9,"ion-row"),p.Qb(10,"ion-col"),p.Qb(11,"ion-button",3),p.Yb("click",(function(){return e.closeSelf()})),p.rc(12,"Cofnij"),p.Pb(),p.Pb(),p.Qb(13,"ion-col"),p.Qb(14,"ion-button",4),p.rc(15,"Filtruj (0)"),p.Pb(),p.Pb(),p.Pb(),p.Pb(),p.Pb()),2&t&&(p.zb(3),p.hc("defaultHref",""),p.zb(11),p.hc("disabled",!1))},directives:[h.m,h.H,h.h,h.d,h.e,h.F,h.k,h.l,h.w,h.j,h.g],styles:["ion-content[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{padding:10px}ion-content[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .close-self-btn[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]{background-color:transparent;padding:10px;font-size:larger}ion-content[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .close-self-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-size:larger}ion-content[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .close-self-btn[_ngcontent-%COMP%]{top:0;right:0;position:absolute}ion-content[_ngcontent-%COMP%]   ion-footer[_ngcontent-%COMP%]{bottom:0;position:fixed}"]}),t})();var C=n("DnKK"),_=n("ioEP"),Q=n("MzrQ");const v=["searchbar"];function k(t,e){if(1&t&&p.Mb(0,"app-products-section",9),2&t){const t=p.ac(2);p.hc("title","Produkty z kategorii: "+t.actualTree.label)("products",t.products)}}function O(t,e){if(1&t){const t=p.Rb();p.Ob(0),p.Qb(1,"ion-header"),p.Qb(2,"ion-toolbar"),p.Qb(3,"ion-row"),p.Qb(4,"ion-col"),p.Qb(5,"button",2),p.Qb(6,"a",3),p.Yb("click",(function(){return p.mc(t),p.ac().openCategories()})),p.rc(7,"Kategorie"),p.Pb(),p.Pb(),p.Pb(),p.Qb(8,"ion-col"),p.Qb(9,"button",4),p.Yb("click",(function(){return p.mc(t),p.ac().openFilters()})),p.Qb(10,"a",5),p.rc(11,"Filtry"),p.Pb(),p.Pb(),p.Pb(),p.Qb(12,"ion-col"),p.Qb(13,"button",4),p.Yb("click",(function(){return p.mc(t),p.ac().openSortBy()})),p.Qb(14,"a",5),p.rc(15,"Sortuj"),p.Pb(),p.Pb(),p.Pb(),p.Pb(),p.Pb(),p.Pb(),p.Qb(16,"ion-content",6),p.Qb(17,"ion-toolbar",7),p.Yb("click",(function(){return p.mc(t),p.ac().clearFilters()})),p.Qb(18,"ion-label"),p.Qb(19,"a",5),p.rc(20,"Szukaj innych produkt\xf3w"),p.Pb(),p.Pb(),p.Pb(),p.pc(21,k,1,2,"app-products-section",8),p.Pb(),p.Nb()}if(2&t){const t=p.ac();p.zb(21),p.hc("ngIf",!!t.products&&t.products.length>0)}}function S(t,e){1&t&&(p.Ob(0),p.Qb(1,"ion-label",15),p.Qb(2,"p"),p.rc(3,"Nie znaleziono szukanej kategorii"),p.Pb(),p.Pb(),p.Nb())}function M(t,e){if(1&t){const t=p.Rb();p.Qb(0,"ion-header",10),p.Qb(1,"ion-toolbar"),p.Qb(2,"ion-searchbar",11,12),p.Yb("ionChange",(function(e){return p.mc(t),p.ac().searchForCategory(e.target.value)}))("ionClear",(function(){return p.mc(t),p.ac().proposedCategories=[]})),p.Pb(),p.Pb(),p.Pb(),p.Qb(4,"ion-content"),p.Qb(5,"app-categories-list",13),p.Yb("selectLeaf",(function(e){return p.mc(t),p.ac().searchIn(e)})),p.Pb(),p.pc(6,S,4,0,"ng-container",14),p.Pb()}if(2&t){const t=p.lc(3),e=p.ac();p.zb(5),p.hc("filterContain",!!t.value&&""!==t.value.trim()&&t.value.trim()||""),p.zb(1),p.hc("ngIf",!!t.value&&""!==t.value.trim()&&0===e.proposedCategories.length)}}const T=[{path:"",component:(()=>{class t{constructor(t,e,n){this._searchService=t,this._categoriesService=e,this._modalController=n,this.actualTree={ID:"",label:"test",value:"test"},this.proposedCategories=[],this.clearFilters=()=>this._searchService.filters={},this.ionViewDidEnter=()=>setTimeout(()=>{this.searchbar&&this.searchbar.setFocus()})}get hasFilters(){return!!this._searchService.filters&&Object.keys(this._searchService.filters).length>0}ngOnInit(){this._searchService.products$.pipe(Object(C.a)(this)).subscribe(t=>this.products=t)}searchIn(t){this._searchService.filters={category:t}}get categoriesTrees(){return this._categoriesService.categoriesTrees}searchForCategory(t){const e=!t||""===t.trim();this.proposedCategories=e?[]:this._categoriesService.getCategoriesBy(t)}openFilters(){return Object(c.a)(this,void 0,void 0,(function*(){const t=yield this._modalController.create({component:m});return yield t.present()}))}openCategories(){return Object(c.a)(this,void 0,void 0,(function*(){const t=yield this._modalController.create({component:a.a,componentProps:{actualTree:this.parentCategoryTree,categories:this.categoriesTrees}});return yield t.present()}))}openSortBy(){return Object(c.a)(this,void 0,void 0,(function*(){const t=yield this._modalController.create({component:y});return t.onDidDismiss().then(t=>t.data?this._searchService.sortType=t.data:null),yield t.present()}))}ngOnDestroy(){}_updateSortTypeBy(t){const e=t.get("sortType")?t.get("sortType"):l.a;this._searchService.sortType=e}_updateFiltersBy(t){const e=t.get("filters")?JSON.parse(t.get("filters")):{};this._searchService.filters=e,e.category&&this._updateCategoryBy(e.category)}_updateCategoryBy(t){const e=this._categoriesService.findParentCategoryTreeBy(t),n=this._categoriesService.findCategoryTreeBy(t);this.parentCategoryTree=e||n,this.actualTree=e?n:null}}return t.\u0275fac=function(e){return new(e||t)(p.Lb(s.a),p.Lb(b.a),p.Lb(h.K))},t.\u0275cmp=p.Fb({type:t,selectors:[["app-search"]],viewQuery:function(t,e){var n;1&t&&p.vc(v,!0),2&t&&p.kc(n=p.Zb())&&(e.searchbar=n.first)},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["search",""],[1,"header-btn"],["href","javascript:void(0)",3,"click"],[1,"header-btn",3,"click"],["href","javascript:void(0)"],["fullscreen",""],[3,"click"],[3,"title","products",4,"ngIf"],[3,"title","products"],["no-border",""],["autocomplete","on","autocorrect","on","inputmode","text","placeholder","Jakiego produktu szukasz?","spellcheck","true","debounce","300",3,"ionChange","ionClear"],["searchbar",""],[3,"filterContain","selectLeaf"],[4,"ngIf"],[1,"non-found-description"]],template:function(t,e){if(1&t&&(p.pc(0,O,22,1,"ng-container",0),p.pc(1,M,7,2,"ng-template",null,1,p.qc)),2&t){const t=p.lc(2);p.hc("ngIf",e.hasFilters)("ngIfElse",t)}},directives:[r.m,h.m,h.H,h.w,h.j,h.k,h.s,_.a,h.x,h.N,Q.a],encapsulation:2}),t})()}];let F=(()=>{class t{}return t.\u0275mod=p.Jb({type:t}),t.\u0275inj=p.Ib({factory:function(e){return new(e||t)},imports:[[i.j.forChild(T)],i.j]}),t})(),j=(()=>{class t{}return t.\u0275mod=p.Jb({type:t}),t.\u0275inj=p.Ib({factory:function(e){return new(e||t)},imports:[[h.I,r.b,F,o.a]]}),t})()}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{TdLt:function(e,s,t){"use strict";t.r(s),t.d(s,"MessagesModule",(function(){return g}));var n=t("PCNd"),o=t("TEn/"),i=t("mrSG"),c=t("N7YL"),a=t("ZjcB"),r=t("fXoL"),b=t("tyNb"),l=t("ofXK");function u(e,s){if(1&e){const e=r.Rb();r.Qb(0,"ion-item",3),r.Yb("click",(function(){r.lc(e);const t=s.$implicit;return r.ac().openMessage(t)})),r.Qb(1,"ion-badge",4),r.qc(2),r.Pb(),r.Qb(3,"ion-label"),r.Qb(4,"b"),r.qc(5),r.Pb(),r.Qb(6,"p"),r.Qb(7,"small"),r.qc(8),r.bc(9,"date"),r.Pb(),r.Pb(),r.Qb(10,"p"),r.Qb(11,"small"),r.Qb(12,"b"),r.qc(13),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb()}if(2&e){const e=s.$implicit,t=r.ac();r.zb(1),r.hc("color",0===t.unreadCount(e)?"light":"success"),r.zb(1),r.sc(" ",t.unreadCount(e)>9?"+9":t.unreadCount(e)," "),r.zb(3),r.rc(e.user.name),r.zb(3),r.sc("Ostatnia wiadomosc z: ",r.cc(9,5,t.lastMessageTimeInMs(e),"M/d/yy, hh:mm:ss"),""),r.zb(5),r.rc(t.lastMessage(e).content)}}const m=[{path:"",component:(()=>{class e{constructor(e,s,t){this._messagesService=e,this._modalController=s,this._router=t,this.lastMessage=e=>!!e.messages[e.messages.length-1]&&e.messages[e.messages.length-1],this.lastMessageTimeInMs=e=>1e3*this.lastMessage(e).creationDate,this.unreadCount=e=>e.messages.filter(e=>!e.readDate&&e.isResponse).length,this.openMessage=e=>Object(i.a)(this,void 0,void 0,(function*(){const s=yield this._modalController.create({component:a.a,componentProps:{conversation:e}});return e.messages.filter(e=>!e.readDate).forEach(e=>e.readDate=(new Date).getTime()),yield s.present()}))}get conversations(){return this._messagesService.conversations}ngOnInit(){this._router.events.subscribe(()=>{"/zakladki/wiadomosci"===this._router.url&&this.conversations.filter(e=>!e.viewDate).forEach(e=>e.viewDate=(new Date).getTime())})}}return e.\u0275fac=function(s){return new(s||e)(r.Lb(c.a),r.Lb(o.H),r.Lb(b.g))},e.\u0275cmp=r.Fb({type:e,selectors:[["ng-component"]],decls:7,vars:1,consts:[["fullScreen",""],["lines","full"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["slot","start",3,"color"]],template:function(e,s){1&e&&(r.Qb(0,"ion-header"),r.Qb(1,"ion-toolbar"),r.Qb(2,"ion-title"),r.qc(3,"Moje wiadomo\u015bci"),r.Pb(),r.Pb(),r.Pb(),r.Qb(4,"ion-content",0),r.Qb(5,"ion-list",1),r.oc(6,u,14,8,"ion-item",2),r.Pb(),r.Pb()),2&e&&(r.zb(6),r.gc("ngForOf",s.conversations))},directives:[o.l,o.E,o.D,o.j,o.r,l.k,o.o,o.e,o.q],pipes:[l.e],encapsulation:2}),e})()}];let d=(()=>{class e{}return e.\u0275mod=r.Jb({type:e}),e.\u0275inj=r.Ib({factory:function(s){return new(s||e)},imports:[[b.j.forChild(m)],b.j]}),e})(),g=(()=>{class e{}return e.\u0275mod=r.Jb({type:e}),e.\u0275inj=r.Ib({factory:function(s){return new(s||e)},imports:[[l.b,o.F,d,n.a]]}),e})()}}]);
function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{TdLt:function(e,n,t){"use strict";t.r(n),t.d(n,"MessagesModule",(function(){return g}));var r=t("PCNd"),s=t("TEn/"),o=t("mrSG"),i=t("N7YL"),a=t("ZjcB"),c=t("fXoL"),u=t("tyNb"),l=t("ofXK");function b(e,n){if(1&e){var t=c.Rb();c.Qb(0,"ion-item",3),c.Yb("click",(function(){c.lc(t);var e=n.$implicit;return c.ac().openMessage(e)})),c.Qb(1,"ion-badge",4),c.qc(2),c.Pb(),c.Qb(3,"ion-label"),c.Qb(4,"b"),c.qc(5),c.Pb(),c.Qb(6,"p"),c.Qb(7,"small"),c.qc(8),c.bc(9,"date"),c.Pb(),c.Pb(),c.Qb(10,"p"),c.Qb(11,"small"),c.Qb(12,"b"),c.qc(13),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb()}if(2&e){var r=n.$implicit,s=c.ac();c.zb(1),c.hc("color",0===s.unreadCount(r)?"light":"success"),c.zb(1),c.sc(" ",s.unreadCount(r)>9?"+9":s.unreadCount(r)," "),c.zb(3),c.rc(r.user.name),c.zb(3),c.sc("Ostatnia wiadomosc z: ",c.cc(9,5,s.lastMessageTimeInMs(r),"M/d/yy, hh:mm:ss"),""),c.zb(5),c.rc(s.lastMessage(r).content)}}var f,m,p,h=[{path:"",component:(f=function(){function e(n,t,r){var s=this;_classCallCheck(this,e),this._messagesService=n,this._modalController=t,this._router=r,this.lastMessage=function(e){return!!e.messages[e.messages.length-1]&&e.messages[e.messages.length-1]},this.lastMessageTimeInMs=function(e){return 1e3*s.lastMessage(e).creationDate},this.unreadCount=function(e){return e.messages.filter((function(e){return!e.readDate&&e.isResponse})).length},this.openMessage=function(e){return Object(o.a)(s,void 0,void 0,regeneratorRuntime.mark((function n(){var t;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this._modalController.create({component:a.a,componentProps:{conversation:e}});case 2:return t=n.sent,e.messages.filter((function(e){return!e.readDate})).forEach((function(e){return e.readDate=(new Date).getTime()})),n.next=6,t.present();case 6:return n.abrupt("return",n.sent);case 7:case"end":return n.stop()}}),n,this)})))}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this._router.events.subscribe((function(){"/zakladki/wiadomosci"===e._router.url&&e.conversations.filter((function(e){return!e.viewDate})).forEach((function(e){return e.viewDate=(new Date).getTime()}))}))}},{key:"conversations",get:function(){return this._messagesService.conversations}}]),e}(),f.\u0275fac=function(e){return new(e||f)(c.Lb(i.a),c.Lb(s.H),c.Lb(u.g))},f.\u0275cmp=c.Fb({type:f,selectors:[["ng-component"]],decls:7,vars:1,consts:[["fullScreen",""],["lines","full"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["slot","start",3,"color"]],template:function(e,n){1&e&&(c.Qb(0,"ion-header"),c.Qb(1,"ion-toolbar"),c.Qb(2,"ion-title"),c.qc(3,"Moje wiadomo\u015bci"),c.Pb(),c.Pb(),c.Pb(),c.Qb(4,"ion-content",0),c.Qb(5,"ion-list",1),c.oc(6,b,14,8,"ion-item",2),c.Pb(),c.Pb()),2&e&&(c.zb(6),c.gc("ngForOf",n.conversations))},directives:[s.l,s.E,s.D,s.j,s.r,l.k,s.o,s.e,s.q],pipes:[l.e],encapsulation:2}),f)}],d=((p=function e(){_classCallCheck(this,e)}).\u0275mod=c.Jb({type:p}),p.\u0275inj=c.Ib({factory:function(e){return new(e||p)},imports:[[u.j.forChild(h)],u.j]}),p),g=((m=function e(){_classCallCheck(this,e)}).\u0275mod=c.Jb({type:m}),m.\u0275inj=c.Ib({factory:function(e){return new(e||m)},imports:[[l.b,s.F,d,r.a]]}),m)}}]);
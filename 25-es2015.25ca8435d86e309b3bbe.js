(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{RmqX:function(t,e,o){"use strict";o.r(e),o.d(e,"SearchModule",(function(){return j}));var n=o("PCNd"),r=o("ofXK"),i=o("tyNb"),c=o("mrSG"),s=o("AB0y"),a=o("ngWF"),l=o("co2y"),b=o("U5Sr"),u=o("AytR"),g=o("fXoL"),p=o("tk/3");let d=(()=>{class t{constructor(t){this._http=t,this.sortTypes=[],this.sortTypes$.subscribe(t=>this.sortTypes=t)}get sortTypes$(){return this._http.get(`${u.a.API_URL}`).pipe(t=>t.sortTypes)}}return t.\u0275fac=function(e){return new(e||t)(g.Ub(p.a))},t.\u0275prov=g.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var f=o("TEn/");function h(t,e){if(1&t){const t=g.Rb();g.Qb(0,"ion-item"),g.Qb(1,"ion-label",6),g.Yb("click",(function(){g.lc(t);const o=e.$implicit;return g.ac(2).closeSelf(o.value)})),g.qc(2),g.Pb(),g.Pb()}if(2&t){const t=e.$implicit;g.zb(2),g.rc(t.label)}}function P(t,e){if(1&t&&(g.Ob(0),g.Qb(1,"ion-item-divider"),g.Qb(2,"ion-label"),g.qc(3),g.Pb(),g.Pb(),g.oc(4,h,3,1,"ion-item",4),g.Nb()),2&t){const t=e.$implicit;g.zb(3),g.rc(t.groupLabel),g.zb(1),g.gc("ngForOf",t.values)}}let C=(()=>{class t{constructor(t,e){this._sortTypesService=t,this._modalController=e,this.closeSelf=(t=null)=>this._modalController.dismiss(t)}get sortTypes(){return this._sortTypesService.sortTypes}}return t.\u0275fac=function(e){return new(e||t)(g.Lb(d),g.Lb(f.H))},t.\u0275cmp=g.Fb({type:t,selectors:[["app-sort-by"]],decls:16,vars:2,consts:[["slot","start"],[3,"defaultHref","click"],["fullscreen",""],["lines","none"],[4,"ngFor","ngForOf"],["expand","block",3,"click"],[3,"click"]],template:function(t,e){1&t&&(g.Qb(0,"ion-header"),g.Qb(1,"ion-toolbar"),g.Qb(2,"ion-buttons",0),g.Qb(3,"ion-back-button",1),g.Yb("click",(function(){return e.closeSelf()})),g.Pb(),g.Pb(),g.Qb(4,"ion-title"),g.qc(5,"Sortuj wedlug"),g.Pb(),g.Pb(),g.Pb(),g.Qb(6,"ion-content",2),g.Qb(7,"ion-list",3),g.Qb(8,"ion-list-header"),g.Qb(9,"h3"),g.qc(10,"Sortuj wed\u0142ug"),g.Pb(),g.Pb(),g.oc(11,P,5,2,"ng-container",4),g.Pb(),g.Pb(),g.Qb(12,"ion-footer"),g.Qb(13,"ion-toolbar"),g.Qb(14,"ion-button",5),g.Yb("click",(function(){return e.closeSelf()})),g.qc(15,"Cofnij"),g.Pb(),g.Pb(),g.Pb()),2&t&&(g.zb(3),g.gc("defaultHref",""),g.zb(8),g.gc("ngForOf",e.sortTypes))},directives:[f.l,f.E,f.g,f.c,f.d,f.D,f.j,f.r,f.s,r.k,f.k,f.f,f.p,f.q,f.o],styles:["ion-list[_ngcontent-%COMP%]{padding:0!important}ion-list[_ngcontent-%COMP%]   ion-item-divider[_ngcontent-%COMP%]{--ion-background-color:#e9ecf0!important;color:#000}ion-footer[_ngcontent-%COMP%]{padding:10px}"]}),t})(),_=(()=>{class t{constructor(t,e){this._searchService=t,this._modalController=e,this.filters={},this.applyFilters=()=>{},this.closeSelf=()=>this._modalController.dismiss({dismissed:!0})}}return t.\u0275fac=function(e){return new(e||t)(g.Lb(s.a),g.Lb(f.H))},t.\u0275cmp=g.Fb({type:t,selectors:[["app-filters"]],decls:16,vars:2,consts:[["slot","start"],[3,"defaultHref","click"],["fullscreen",""],["expand","block",3,"click"],["expand","block",3,"disabled"]],template:function(t,e){1&t&&(g.Qb(0,"ion-header"),g.Qb(1,"ion-toolbar"),g.Qb(2,"ion-buttons",0),g.Qb(3,"ion-back-button",1),g.Yb("click",(function(){return e.closeSelf()})),g.Pb(),g.Pb(),g.Qb(4,"ion-title"),g.qc(5,"Filtruj"),g.Pb(),g.Pb(),g.Pb(),g.Mb(6,"ion-content",2),g.Qb(7,"ion-footer"),g.Qb(8,"ion-toolbar"),g.Qb(9,"ion-row"),g.Qb(10,"ion-col"),g.Qb(11,"ion-button",3),g.Yb("click",(function(){return e.closeSelf()})),g.qc(12,"Cofnij"),g.Pb(),g.Pb(),g.Qb(13,"ion-col"),g.Qb(14,"ion-button",4),g.qc(15,"Filtruj (0)"),g.Pb(),g.Pb(),g.Pb(),g.Pb(),g.Pb()),2&t&&(g.zb(3),g.gc("defaultHref",""),g.zb(11),g.gc("disabled",!1))},directives:[f.l,f.E,f.g,f.c,f.d,f.D,f.j,f.k,f.u,f.i,f.f],styles:["ion-content[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{padding:10px}ion-content[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .close-self-btn[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]{background-color:transparent;padding:10px;font-size:larger}ion-content[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .close-self-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-size:larger}ion-content[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .close-self-btn[_ngcontent-%COMP%]{top:0;right:0;position:absolute}ion-content[_ngcontent-%COMP%]   ion-footer[_ngcontent-%COMP%]{bottom:0;position:fixed}"]}),t})();var y=o("DnKK"),Q=o("ioEP"),O=o("MzrQ");const m=["searchbar"];function v(t,e){if(1&t&&g.Mb(0,"app-products-section",9),2&t){const t=g.ac(2);g.gc("title","Produkty z kategorii: "+t.actualCategoryTree.label)("products",t.products)}}function k(t,e){if(1&t){const t=g.Rb();g.Ob(0),g.Qb(1,"ion-header"),g.Qb(2,"ion-toolbar"),g.Qb(3,"ion-row"),g.Qb(4,"ion-col"),g.Qb(5,"button",2),g.Qb(6,"a",3),g.Yb("click",(function(){return g.lc(t),g.ac().openCategories()})),g.qc(7,"Kategorie"),g.Pb(),g.Pb(),g.Pb(),g.Qb(8,"ion-col"),g.Qb(9,"button",4),g.Yb("click",(function(){return g.lc(t),g.ac().openFilters()})),g.Qb(10,"a",5),g.qc(11,"Filtry"),g.Pb(),g.Pb(),g.Pb(),g.Qb(12,"ion-col"),g.Qb(13,"button",4),g.Yb("click",(function(){return g.lc(t),g.ac().openSortBy()})),g.Qb(14,"a",5),g.qc(15,"Sortuj"),g.Pb(),g.Pb(),g.Pb(),g.Pb(),g.Pb(),g.Pb(),g.Qb(16,"ion-content",6),g.Qb(17,"ion-toolbar",7),g.Yb("click",(function(){return g.lc(t),g.ac().clearFilters()})),g.Qb(18,"ion-label"),g.Qb(19,"a",5),g.qc(20,"Szukaj innych produkt\xf3w"),g.Pb(),g.Pb(),g.Pb(),g.oc(21,v,1,2,"app-products-section",8),g.Pb(),g.Nb()}if(2&t){const t=g.ac();g.zb(21),g.gc("ngIf",!!t.products&&t.products.length>0)}}function M(t,e){if(1&t){const t=g.Rb();g.Qb(0,"a",3),g.Yb("click",(function(){g.lc(t);const o=e.$implicit;return g.ac(2).searchIn(o)})),g.Qb(1,"ion-item"),g.qc(2),g.Pb(),g.Pb()}if(2&t){const t=e.$implicit;g.zb(2),g.sc(" ",t.label," ")}}function S(t,e){if(1&t){const t=g.Rb();g.Qb(0,"ion-header",10),g.Qb(1,"ion-toolbar"),g.Qb(2,"ion-searchbar",11,12),g.Yb("ionChange",(function(e){return g.lc(t),g.ac().searchForCategory(e.target.value)}))("ionClear",(function(){return g.lc(t),g.ac().clearProposedCategories()})),g.Pb(),g.Pb(),g.Pb(),g.Qb(4,"ion-content"),g.Qb(5,"ion-list",13),g.oc(6,M,3,1,"a",14),g.Pb(),g.Mb(7,"app-categories-list"),g.Pb()}if(2&t){const t=g.ac();g.zb(6),g.gc("ngForOf",t.proposedCategories)}}const T=[{path:"",component:(()=>{class t{constructor(t,e,o){this._searchService=t,this._categoriesService=e,this._modalController=o,this.actualCategoryTree={ID:"",label:"test",value:"test"},this.proposedCategories=[],this.clearFilters=()=>this._searchService.filters={},this.ionViewDidEnter=()=>setTimeout(()=>{this.searchbar&&this.searchbar.setFocus()}),this.clearProposedCategories=()=>this.proposedCategories=[]}get hasFilters(){return!!this._searchService.filters&&Object.keys(this._searchService.filters).length>0}ngOnInit(){this._searchService.products$.pipe(Object(y.a)(this)).subscribe(t=>this.products=t)}searchIn(t){this._searchService.filters={category:t}}get categoriesTrees(){return this._categoriesService.categoriesTrees}searchForCategory(t){t&&""!==t.trim()?this.proposedCategories=this._categoriesService.getCategoriesBy(t):this.clearProposedCategories()}openFilters(){return Object(c.a)(this,void 0,void 0,(function*(){const t=yield this._modalController.create({component:_});return yield t.present()}))}openCategories(){return Object(c.a)(this,void 0,void 0,(function*(){const t=yield this._modalController.create({component:a.a,componentProps:{actualCategoryTree:this.parentCategoryTree,categories:this.categoriesTrees}});return yield t.present()}))}openSortBy(){return Object(c.a)(this,void 0,void 0,(function*(){const t=yield this._modalController.create({component:C});return t.onDidDismiss().then(t=>t.data?this._searchService.sortType=t.data:null),yield t.present()}))}ngOnDestroy(){}_updateSortTypeBy(t){const e=t.get("sortType")?t.get("sortType"):l.a;this._searchService.sortType=e}_updateFiltersBy(t){const e=t.get("filters")?JSON.parse(t.get("filters")):{};this._searchService.filters=e,e.category&&this._updateCategoryBy(e.category)}_updateCategoryBy(t){const e=this._categoriesService.findParentCategoryTreeBy(t),o=this._categoriesService.findCategoryTreeBy(t);this.parentCategoryTree=e||o,this.actualCategoryTree=e?o:null}}return t.\u0275fac=function(e){return new(e||t)(g.Lb(s.a),g.Lb(b.a),g.Lb(f.H))},t.\u0275cmp=g.Fb({type:t,selectors:[["app-search"]],viewQuery:function(t,e){var o;1&t&&g.uc(m,!0),2&t&&g.jc(o=g.Zb())&&(e.searchbar=o.first)},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["search",""],[1,"header-btn"],["href","javascript:void(0)",3,"click"],[1,"header-btn",3,"click"],["href","javascript:void(0)"],["fullscreen",""],[3,"click"],[3,"title","products",4,"ngIf"],[3,"title","products"],["no-border",""],["autocomplete","on","autocorrect","on","inputmode","text","placeholder","Jakiego produktu szukasz?","spellcheck","true","debounce","500",3,"ionChange","ionClear"],["searchbar",""],["lines","none"],["href","javascript:void(0)",3,"click",4,"ngFor","ngForOf"]],template:function(t,e){if(1&t&&(g.oc(0,k,22,1,"ng-container",0),g.oc(1,S,8,1,"ng-template",null,1,g.pc)),2&t){const t=g.kc(2);g.gc("ngIf",e.hasFilters)("ngIfElse",t)}},directives:[r.l,f.l,f.E,f.u,f.i,f.j,f.q,Q.a,f.v,f.K,f.r,r.k,O.a,f.o],styles:["ion-toolbar[_ngcontent-%COMP%]   .header-btn[_ngcontent-%COMP%]{background-color:transparent}ion-toolbar[_ngcontent-%COMP%]   .header-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-size:larger}ion-toolbar[_ngcontent-%COMP%]   .header-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:large}ion-header[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{text-align:center}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{color:green}"]}),t})()}];let F=(()=>{class t{}return t.\u0275mod=g.Jb({type:t}),t.\u0275inj=g.Ib({factory:function(e){return new(e||t)},imports:[[i.j.forChild(T)],i.j]}),t})(),j=(()=>{class t{}return t.\u0275mod=g.Jb({type:t}),t.\u0275inj=g.Ib({factory:function(e){return new(e||t)},imports:[[f.F,r.b,F,n.a]]}),t})()}}]);
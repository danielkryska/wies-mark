(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{SCLQ:function(t,n,i){"use strict";i.r(n),i.d(n,"BasketModule",(function(){return O}));var o=i("TEn/"),e=i("ofXK"),c=i("tyNb"),s=i("DnKK"),r=i("2qjx"),p=i("LvDl"),b=i("fXoL"),l=i("3Pt+");function a(t,n){1&t&&(b.Pb(0,"ion-content"),b.Pb(1,"div",4),b.Lb(2,"ion-icon",5),b.Pb(3,"p"),b.pc(4,"Tw\xf3j koszyk jest pusty"),b.Ob(),b.Pb(5,"small"),b.Pb(6,"a",6),b.Pb(7,"b"),b.pc(8,"Odwied\u017a jarmark"),b.Ob(),b.Ob(),b.Pb(9,"span"),b.pc(10," lub "),b.Ob(),b.Pb(11,"a",7),b.Pb(12,"b"),b.pc(13,"Znajd\u017a produkt"),b.Ob(),b.Ob(),b.Ob(),b.Ob(),b.Ob())}function u(t,n){if(1&t){const t=b.Qb();b.Pb(0,"ion-item"),b.Pb(1,"ion-checkbox",11),b.Xb("ionChange",(function(i){b.lc(t);const o=n.$implicit;return b.Zb(3).toggleProduct(o,i)})),b.Ob(),b.Pb(2,"ion-avatar",13),b.Lb(3,"img",14),b.Ob(),b.Pb(4,"ion-label"),b.Pb(5,"h3"),b.pc(6),b.Ob(),b.Pb(7,"div",15),b.Pb(8,"ion-row"),b.Pb(9,"ion-col",16),b.Pb(10,"ion-button",17),b.Xb("click",(function(){b.lc(t);const i=n.$implicit;return b.Zb(3).decreaseProductsType(i)})),b.pc(11,"-"),b.Ob(),b.Ob(),b.Pb(12,"ion-col",18),b.Pb(13,"p"),b.pc(14),b.Ob(),b.Ob(),b.Pb(15,"ion-col",16),b.Pb(16,"ion-button",17),b.Xb("click",(function(){b.lc(t);const i=n.$implicit;return b.Zb(3).increaseProductsType(i)})),b.pc(17,"+"),b.Ob(),b.Ob(),b.Ob(),b.Ob(),b.Pb(18,"h2"),b.pc(19),b.ac(20,"currency"),b.Ob(),b.Ob(),b.Ob()}if(2&t){const t=n.$implicit,i=b.Zb(3);b.zb(1),b.gc("ngModel",!!t.inBasket),b.zb(2),b.hc("src",t.photos[0].url,b.mc),b.zb(3),b.qc(t.title),b.zb(8),b.qc(i.productsMultiplications[t.title+t.supplier.name]),b.zb(5),b.sc(" ",b.dc(20,6,t.price,t.currency,"symbol-narrow","1.2")," / ",t.unit," ")}}function d(t,n){if(1&t){const t=b.Qb();b.Pb(0,"ion-list",9),b.Pb(1,"ion-item",10),b.Pb(2,"ion-label"),b.Pb(3,"p"),b.Pb(4,"small"),b.pc(5),b.Ob(),b.Ob(),b.Ob(),b.Pb(6,"ion-checkbox",11),b.Xb("ionChange",(function(i){b.lc(t);const o=n.$implicit;return b.Zb(2).toggleSupplierProducts(o.key,i)})),b.Ob(),b.Ob(),b.oc(7,u,21,11,"ion-item",12),b.Ob()}if(2&t){const t=n.$implicit,i=b.Zb(2);b.zb(5),b.qc(t.key),b.zb(1),b.gc("ngModel",i.isSupplierChecked(t.key)),b.zb(1),b.gc("ngForOf",t.value)}}function g(t,n){if(1&t&&(b.Pb(0,"ion-content"),b.oc(1,d,8,3,"ion-list",8),b.ac(2,"keyvalue"),b.Ob()),2&t){const t=b.Zb();b.zb(1),b.gc("ngForOf",b.bc(2,1,t.suppliersProducts))}}const P=[{path:"",component:(()=>{class t{constructor(t){this._productsService=t,this.suppliersProducts={},this.productsMultiplications={},this.initiateProductMultiplication=t=>{this.productsMultiplications[t.title+t.supplier.name]=1},this.decreaseProductsType=t=>{const n=t.title+t.supplier.name;this.paymentSum=1===this.productsMultiplications[n]?this.paymentSum:this.paymentSum-t.price,this.productsMultiplications[n]=1===this.productsMultiplications[n]?this.productsMultiplications[n]:this.productsMultiplications[n]-1},this.increaseProductsType=t=>{const n=t.title+t.supplier.name;this.paymentSum=this.paymentSum+t.price,this.productsMultiplications[n]=this.productsMultiplications[n]+1},this.toggleSupplierProducts=(t,n)=>{this.suppliersProducts[t].forEach(t=>t.inBasket=n.target.checked)},this.toggleProduct=(t,n)=>{t.inBasket=n.target.checked,this.paymentSum+=n.target.checked?t.price:-t.price},this.isSupplierChecked=t=>p.some(this.suppliersProducts[t],t=>t.inBasket)}ngOnInit(){this._productsService.getProducts$([t=>!!t.inBasket]).pipe(Object(s.a)(this)).subscribe(t=>{this.paymentSum=t.reduce((t,n)=>t+n.price,0),t.forEach(t=>this.initiateProductMultiplication(t)),this.suppliersProducts=p.groupBy(t,"supplier.name")})}get hasProducts(){return!!this.suppliersProducts&&Object.keys(this.suppliersProducts).length>0}ngOnDestroy(){}}return t.\u0275fac=function(n){return new(n||t)(b.Kb(r.a))},t.\u0275cmp=b.Eb({type:t,selectors:[["app-basket"]],decls:12,vars:8,consts:[[4,"ngIf"],["size-xs","4"],["size-xs","8"],["expand","block"],[1,"empty-basket-message"],["name","basket"],["routerLink","/zakladki/jarmark"],["routerLink","/zakladki/szukaj"],["lines","none",4,"ngFor","ngForOf"],["lines","none"],[1,"supplier"],["checked","","slot","start",3,"ngModel","ionChange"],[4,"ngFor","ngForOf"],["slot","start"],[3,"src"],[1,"multiply"],["size","3"],[3,"click"],["size","4"]],template:function(t,n){1&t&&(b.oc(0,a,14,0,"ion-content",0),b.oc(1,g,3,3,"ion-content",0),b.Pb(2,"ion-footer"),b.Pb(3,"ion-toolbar"),b.Pb(4,"ion-row"),b.Pb(5,"ion-col",1),b.Pb(6,"p"),b.pc(7),b.ac(8,"currency"),b.Ob(),b.Ob(),b.Pb(9,"ion-col",2),b.Pb(10,"ion-button",3),b.pc(11," Podsumowanie "),b.Ob(),b.Ob(),b.Ob(),b.Ob(),b.Ob()),2&t&&(b.gc("ngIf",!n.hasProducts),b.zb(1),b.gc("ngIf",n.hasProducts),b.zb(6),b.qc(b.dc(8,3,n.paymentSum,"PLN","symbol-narrow","1.2")))},directives:[e.k,o.h,o.w,o.r,o.f,o.d,o.g,o.j,c.i,o.B,e.j,o.o,o.l,o.n,o.e,o.a,l.d,l.e,o.c],pipes:[e.c,e.f],styles:[".empty-basket-message[_ngcontent-%COMP%]{width:300px;margin:30vh auto;text-align:center;color:grey}.empty-basket-message[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:xx-large}ion-list[_ngcontent-%COMP%]{padding:0;margin-bottom:40px;border-bottom:1px solid #d3d3d3}ion-list[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{width:85px;height:85px}ion-list[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:0}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]:nth-child(odd){--ion-background-color:rgba(0,0,0,0.03)!important}ion-list[_ngcontent-%COMP%]   .supplier[_ngcontent-%COMP%]{border-top:1px solid #d3d3d3;border-bottom:1px solid #d3d3d3}ion-list[_ngcontent-%COMP%]   .multiply[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:0;border:1px solid grey;padding:7px 0;font-size:medium;border-radius:2px}ion-col[_ngcontent-%COMP%]{text-align:center}ion-col[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:large;color:grey;margin-top:11px;margin-bottom:0}"]}),t})()}];let m=(()=>{class t{}return t.\u0275mod=b.Ib({type:t}),t.\u0275inj=b.Hb({factory:function(n){return new(n||t)},imports:[[c.j.forChild(P)],c.j]}),t})(),O=(()=>{class t{}return t.\u0275mod=b.Ib({type:t}),t.\u0275inj=b.Hb({factory:function(n){return new(n||t)},imports:[[o.x,e.b,m,l.a]]}),t})()}}]);
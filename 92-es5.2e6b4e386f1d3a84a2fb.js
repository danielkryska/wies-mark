function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function _createClass(t,n,i){return n&&_defineProperties(t.prototype,n),i&&_defineProperties(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{SCLQ:function(t,n,i){"use strict";i.r(n),i.d(n,"BasketModule",(function(){return C}));var e=i("TEn/"),o=i("ofXK"),c=i("tyNb"),r=i("DnKK"),s=i("2qjx"),a=i("LvDl"),u=i("fXoL"),p=i("3Pt+");function l(t,n){1&t&&(u.Pb(0,"ion-content"),u.Pb(1,"div",4),u.Lb(2,"ion-icon",5),u.Pb(3,"p"),u.pc(4,"Tw\xf3j koszyk jest pusty"),u.Ob(),u.Pb(5,"small"),u.Pb(6,"a",6),u.Pb(7,"b"),u.pc(8,"Odwied\u017a jarmark"),u.Ob(),u.Ob(),u.Pb(9,"span"),u.pc(10," lub "),u.Ob(),u.Pb(11,"a",7),u.Pb(12,"b"),u.pc(13,"Znajd\u017a produkt"),u.Ob(),u.Ob(),u.Ob(),u.Ob(),u.Ob())}function b(t,n){if(1&t){var i=u.Qb();u.Pb(0,"ion-item"),u.Pb(1,"ion-checkbox",11),u.Xb("ionChange",(function(t){u.lc(i);var e=n.$implicit;return u.Zb(3).toggleProduct(e,t)})),u.Ob(),u.Pb(2,"ion-avatar",14),u.Lb(3,"img",15),u.Ob(),u.Pb(4,"ion-label"),u.Pb(5,"h3"),u.pc(6),u.Ob(),u.Pb(7,"div",16),u.Pb(8,"ion-row"),u.Pb(9,"ion-col",17),u.Pb(10,"ion-button",18),u.Xb("click",(function(){u.lc(i);var t=n.$implicit;return u.Zb(3).decreaseProductsType(t)})),u.pc(11,"-"),u.Ob(),u.Ob(),u.Pb(12,"ion-col",19),u.Pb(13,"p"),u.pc(14),u.Ob(),u.Ob(),u.Pb(15,"ion-col",17),u.Pb(16,"ion-button",18),u.Xb("click",(function(){u.lc(i);var t=n.$implicit;return u.Zb(3).increaseProductsType(t)})),u.pc(17,"+"),u.Ob(),u.Ob(),u.Ob(),u.Ob(),u.Pb(18,"h2"),u.pc(19),u.ac(20,"currency"),u.Ob(),u.Ob(),u.Ob()}if(2&t){var e=n.$implicit,o=u.Zb(3);u.zb(1),u.gc("ngModel",!!e.inBasket),u.zb(2),u.hc("src",e.photos[0].url,u.mc),u.zb(3),u.qc(e.title),u.zb(8),u.qc(o.productsMultiplications[e.title+e.supplier.name]),u.zb(5),u.sc(" ",u.dc(20,6,e.price,e.currency,"symbol-narrow","1.2")," / ",e.unit," ")}}var d=function(){return["/zakladki/szukaj"]},P=function(t){return{supplier:t}};function g(t,n){if(1&t){var i=u.Qb();u.Pb(0,"ion-list",9),u.Pb(1,"ion-item",10),u.Pb(2,"ion-label"),u.Pb(3,"p"),u.Pb(4,"small"),u.pc(5),u.Ob(),u.Ob(),u.Ob(),u.Pb(6,"ion-checkbox",11),u.Xb("ionChange",(function(t){u.lc(i);var e=n.$implicit;return u.Zb(2).toggleSupplierProducts(e.key,t)})),u.Ob(),u.Ob(),u.oc(7,b,21,11,"ion-item",12),u.Pb(8,"ion-item"),u.Pb(9,"a",13),u.Pb(10,"small"),u.pc(11,"Inne produkty sprzedaj\u0105cego"),u.Ob(),u.Ob(),u.Ob(),u.Ob()}if(2&t){var e=n.$implicit,o=u.Zb(2);u.zb(5),u.qc(e.key),u.zb(1),u.gc("ngModel",o.isSupplierChecked(e.key)),u.zb(1),u.gc("ngForOf",e.value),u.zb(2),u.gc("routerLink",u.ic(5,d))("queryParams",u.jc(6,P,e.key))}}function m(t,n){if(1&t&&(u.Pb(0,"ion-content"),u.oc(1,g,12,8,"ion-list",8),u.ac(2,"keyvalue"),u.Ob()),2&t){var i=u.Zb();u.zb(1),u.gc("ngForOf",u.bc(2,1,i.suppliersProducts))}}var f,O,h,k=[{path:"",component:(f=function(){function t(n){var i=this;_classCallCheck(this,t),this._productsService=n,this.suppliersProducts={},this.productsMultiplications={},this.initiateProductMultiplication=function(t){i.productsMultiplications[t.title+t.supplier.name]=1},this.decreaseProductsType=function(t){var n=t.title+t.supplier.name;i.paymentSum=1===i.productsMultiplications[n]?i.paymentSum:i.paymentSum-t.price,i.productsMultiplications[n]=1===i.productsMultiplications[n]?i.productsMultiplications[n]:i.productsMultiplications[n]-1},this.increaseProductsType=function(t){var n=t.title+t.supplier.name;i.paymentSum=i.paymentSum+t.price,i.productsMultiplications[n]=i.productsMultiplications[n]+1},this.toggleSupplierProducts=function(t,n){i.suppliersProducts[t].forEach((function(t){return t.inBasket=n.target.checked}))},this.toggleProduct=function(t,n){t.inBasket=n.target.checked,i.paymentSum+=n.target.checked?t.price:-t.price},this.isSupplierChecked=function(t){return a.some(i.suppliersProducts[t],(function(t){return t.inBasket}))}}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this._productsService.getProducts$([function(t){return!!t.inBasket}]).pipe(Object(r.a)(this)).subscribe((function(n){t.paymentSum=n.reduce((function(t,n){return t+n.price}),0),n.forEach((function(n){return t.initiateProductMultiplication(n)})),t.suppliersProducts=a.groupBy(n,"supplier.name")}))}},{key:"ngOnDestroy",value:function(){}},{key:"hasProducts",get:function(){return!!this.suppliersProducts&&Object.keys(this.suppliersProducts).length>0}}]),t}(),f.\u0275fac=function(t){return new(t||f)(u.Kb(s.a))},f.\u0275cmp=u.Eb({type:f,selectors:[["app-basket"]],decls:12,vars:8,consts:[[4,"ngIf"],["size-xs","4"],["size-xs","8"],["expand","block"],[1,"empty-basket-message"],["name","basket"],["routerLink","/zakladki/jarmark"],["routerLink","/zakladki/szukaj"],["lines","none",4,"ngFor","ngForOf"],["lines","none"],[1,"supplier"],["checked","","slot","start",3,"ngModel","ionChange"],[4,"ngFor","ngForOf"],[3,"routerLink","queryParams"],["slot","start"],[3,"src"],[1,"multiply"],["size","3"],[3,"click"],["size","4"]],template:function(t,n){1&t&&(u.oc(0,l,14,0,"ion-content",0),u.oc(1,m,3,3,"ion-content",0),u.Pb(2,"ion-footer"),u.Pb(3,"ion-toolbar"),u.Pb(4,"ion-row"),u.Pb(5,"ion-col",1),u.Pb(6,"p"),u.pc(7),u.ac(8,"currency"),u.Ob(),u.Ob(),u.Pb(9,"ion-col",2),u.Pb(10,"ion-button",3),u.pc(11," Podsumowanie "),u.Ob(),u.Ob(),u.Ob(),u.Ob(),u.Ob()),2&t&&(u.gc("ngIf",!n.hasProducts),u.zb(1),u.gc("ngIf",n.hasProducts),u.zb(6),u.qc(u.dc(8,3,n.paymentSum,"PLN","symbol-narrow","1.2")))},directives:[o.k,e.h,e.w,e.r,e.f,e.d,e.g,e.j,c.i,e.B,o.j,e.o,e.l,e.n,e.e,e.a,p.d,p.e,e.c],pipes:[o.c,o.f],styles:[".empty-basket-message[_ngcontent-%COMP%]{width:300px;margin:30vh auto;text-align:center;color:grey}.empty-basket-message[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:xx-large}ion-list[_ngcontent-%COMP%]{padding:0;margin-bottom:40px;border-bottom:1px solid #d3d3d3}ion-list[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{width:85px;height:85px}ion-list[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:0}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]:nth-child(odd){--ion-background-color:rgba(0,0,0,0.03)!important}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:100%;height:100%;text-align:center;padding-top:13px}ion-list[_ngcontent-%COMP%]   .supplier[_ngcontent-%COMP%]{border-top:1px solid #d3d3d3;border-bottom:1px solid #d3d3d3}ion-list[_ngcontent-%COMP%]   .multiply[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:0;border:1px solid grey;padding:7px 0;font-size:medium;border-radius:2px}ion-col[_ngcontent-%COMP%]{text-align:center}ion-col[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:large;color:grey;margin-top:11px;margin-bottom:0}"]}),f)}],y=((h=function t(){_classCallCheck(this,t)}).\u0275mod=u.Ib({type:h}),h.\u0275inj=u.Hb({factory:function(t){return new(t||h)},imports:[[c.j.forChild(k)],c.j]}),h),C=((O=function t(){_classCallCheck(this,t)}).\u0275mod=u.Ib({type:O}),O.\u0275inj=u.Hb({factory:function(t){return new(t||O)},imports:[[e.x,o.b,y,p.a]]}),O)}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{SCLQ:function(t,i,n){"use strict";n.r(i),n.d(i,"BasketModule",(function(){return x}));var o=n("TEn/"),c=n("ofXK"),e=n("tyNb"),s=n("DnKK"),r=n("2qjx"),b=n("LvDl"),p=n("fXoL"),a=n("3Pt+");function u(t,i){1&t&&(p.Pb(0,"ion-content"),p.Pb(1,"div",4),p.Lb(2,"ion-icon",5),p.Pb(3,"p"),p.pc(4,"Tw\xf3j koszyk jest pusty"),p.Ob(),p.Pb(5,"small"),p.Pb(6,"a",6),p.Pb(7,"b"),p.pc(8,"Odwied\u017a jarmark"),p.Ob(),p.Ob(),p.Pb(9,"span"),p.pc(10," lub "),p.Ob(),p.Pb(11,"a",7),p.Pb(12,"b"),p.pc(13,"Znajd\u017a produkt"),p.Ob(),p.Ob(),p.Ob(),p.Ob(),p.Ob())}function l(t,i){if(1&t){const t=p.Qb();p.Pb(0,"ion-checkbox",15),p.Xb("ionChange",(function(i){p.lc(t);const n=p.Zb().$implicit;return p.Zb(2).toggleSupplierProducts(n.key,i)})),p.Ob()}if(2&t){const t=p.Zb().$implicit,i=p.Zb(2);p.gc("ngModel",i.isSupplierChecked(t.key))}}function d(t,i){if(1&t){const t=p.Qb();p.Pb(0,"ion-checkbox",15),p.Xb("ionChange",(function(i){p.lc(t);const n=p.Zb().$implicit;return p.Zb(3).toggleProduct(n,i)})),p.Ob()}if(2&t){const t=p.Zb().$implicit;p.gc("ngModel",!!t.inBasket)}}function g(t,i){if(1&t){const t=p.Qb();p.Pb(0,"div",19),p.Pb(1,"ion-row"),p.Pb(2,"ion-col",20),p.Pb(3,"ion-button",21),p.Xb("click",(function(){p.lc(t);const i=p.Zb().$implicit;return p.Zb(3).decreaseProductsType(i)})),p.pc(4,"-"),p.Ob(),p.Ob(),p.Pb(5,"ion-col",22),p.Pb(6,"p"),p.pc(7),p.Ob(),p.Ob(),p.Pb(8,"ion-col",20),p.Pb(9,"ion-button",21),p.Xb("click",(function(){p.lc(t);const i=p.Zb().$implicit;return p.Zb(3).increaseProductsType(i)})),p.pc(10,"+"),p.Ob(),p.Ob(),p.Ob(),p.Ob()}if(2&t){const t=p.Zb().$implicit,i=p.Zb(3);p.zb(7),p.qc(i.productsMultiplications[t.title+t.supplier.name])}}function m(t,i){if(1&t&&(p.Pb(0,"span"),p.pc(1),p.Ob()),2&t){const t=p.Zb().$implicit,i=p.Zb(3);p.zb(1),p.rc("x ",i.productsMultiplications[t.title+t.supplier.name],"")}}function P(t,i){if(1&t&&(p.Pb(0,"ion-item"),p.oc(1,d,1,1,"ion-checkbox",11),p.Pb(2,"ion-avatar",16),p.Lb(3,"img",17),p.Ob(),p.Pb(4,"ion-label"),p.Pb(5,"h3"),p.pc(6),p.Ob(),p.oc(7,g,11,1,"div",18),p.Pb(8,"h2"),p.pc(9),p.ac(10,"currency"),p.oc(11,m,2,1,"span",0),p.Ob(),p.Ob(),p.Ob()),2&t){const t=i.$implicit,n=p.Zb(3);p.zb(1),p.gc("ngIf",!n.isSummary),p.zb(2),p.hc("src",t.photos[0].url,p.mc),p.zb(3),p.qc(t.title),p.zb(1),p.gc("ngIf",!n.isSummary),p.zb(2),p.sc(" ",p.dc(10,7,t.price,t.currency,"symbol-narrow","1.2")," / ",t.unit," "),p.zb(2),p.gc("ngIf",n.isSummary&&n.productsMultiplications[t.title+t.supplier.name]>1)}}function O(t,i){1&t&&(p.Pb(0,"a",23),p.Pb(1,"small"),p.pc(2,"Wybierz typ dostawy"),p.Ob(),p.Ob())}const h=function(){return["/zakladki/szukaj"]},f=function(t){return{supplier:t}};function y(t,i){if(1&t&&(p.Pb(0,"a",24),p.Pb(1,"small"),p.pc(2,"Inne produkty sprzedaj\u0105cego"),p.Ob(),p.Ob()),2&t){const t=p.Zb().$implicit;p.gc("routerLink",p.ic(2,h))("queryParams",p.jc(3,f,t.key))}}function k(t,i){if(1&t&&(p.Pb(0,"ion-list",9),p.Pb(1,"ion-item",10),p.Pb(2,"ion-label"),p.Pb(3,"p"),p.Pb(4,"small"),p.pc(5),p.Ob(),p.Ob(),p.Ob(),p.oc(6,l,1,1,"ion-checkbox",11),p.Ob(),p.oc(7,P,12,12,"ion-item",12),p.Pb(8,"ion-item"),p.oc(9,O,3,0,"a",13),p.oc(10,y,3,5,"a",14),p.Ob(),p.Ob()),2&t){const t=i.$implicit,n=p.Zb(2);p.zb(5),p.qc(t.key),p.zb(1),p.gc("ngIf",!n.isSummary),p.zb(1),p.gc("ngForOf",t.value),p.zb(2),p.gc("ngIf",n.isSummary),p.zb(1),p.gc("ngIf",!n.isSummary)}}function M(t,i){if(1&t&&(p.Pb(0,"ion-content"),p.oc(1,k,11,5,"ion-list",8),p.ac(2,"keyvalue"),p.Ob()),2&t){const t=p.Zb();p.zb(1),p.gc("ngForOf",p.bc(2,1,t.suppliersProducts))}}const z=[{path:"",component:(()=>{class t{constructor(t){this._productsService=t,this.isSummary=!1,this.suppliersProducts={},this.productsMultiplications={},this.initiateProductMultiplication=t=>{this.productsMultiplications[t.title+t.supplier.name]=1},this.decreaseProductsType=t=>{const i=t.title+t.supplier.name;this.paymentSum=1===this.productsMultiplications[i]?this.paymentSum:this.paymentSum-t.price,this.productsMultiplications[i]=1===this.productsMultiplications[i]?this.productsMultiplications[i]:this.productsMultiplications[i]-1},this.increaseProductsType=t=>{const i=t.title+t.supplier.name;this.paymentSum=this.paymentSum+t.price,this.productsMultiplications[i]=this.productsMultiplications[i]+1},this.toggleSupplierProducts=(t,i)=>{this.suppliersProducts[t].forEach(t=>t.inBasket=i.target.checked)},this.toggleProduct=(t,i)=>{t.inBasket=i.target.checked,this.paymentSum+=i.target.checked?t.price:-t.price},this.isSupplierChecked=t=>b.some(this.suppliersProducts[t],t=>t.inBasket)}ngOnInit(){this._productsService.getProducts$([t=>!!t.inBasket]).pipe(Object(s.a)(this)).subscribe(t=>{this.paymentSum=t.reduce((t,i)=>t+i.price,0),t.forEach(t=>this.initiateProductMultiplication(t)),this.suppliersProducts=b.groupBy(t,"supplier.name")})}get hasProducts(){return!!this.suppliersProducts&&Object.keys(this.suppliersProducts).length>0}ngOnDestroy(){}}return t.\u0275fac=function(i){return new(i||t)(p.Kb(r.a))},t.\u0275cmp=p.Eb({type:t,selectors:[["app-basket"]],decls:12,vars:9,consts:[[4,"ngIf"],["size-xs","4"],["size-xs","8"],["expand","block",3,"click"],[1,"empty-basket-message"],["name","basket"],["routerLink","/zakladki/jarmark"],["routerLink","/zakladki/szukaj"],["lines","none",4,"ngFor","ngForOf"],["lines","none"],[1,"supplier"],["checked","","slot","start",3,"ngModel","ionChange",4,"ngIf"],[4,"ngFor","ngForOf"],["href","javascript:void(0)",4,"ngIf"],[3,"routerLink","queryParams",4,"ngIf"],["checked","","slot","start",3,"ngModel","ionChange"],["slot","start"],[3,"src"],["class","multiply",4,"ngIf"],[1,"multiply"],["size","3"],[3,"click"],["size","4"],["href","javascript:void(0)"],[3,"routerLink","queryParams"]],template:function(t,i){1&t&&(p.oc(0,u,14,0,"ion-content",0),p.oc(1,M,3,3,"ion-content",0),p.Pb(2,"ion-footer"),p.Pb(3,"ion-toolbar"),p.Pb(4,"ion-row"),p.Pb(5,"ion-col",1),p.Pb(6,"p"),p.pc(7),p.ac(8,"currency"),p.Ob(),p.Ob(),p.Pb(9,"ion-col",2),p.Pb(10,"ion-button",3),p.Xb("click",(function(){return i.isSummary=!0})),p.pc(11),p.Ob(),p.Ob(),p.Ob(),p.Ob(),p.Ob()),2&t&&(p.gc("ngIf",!i.hasProducts),p.zb(1),p.gc("ngIf",i.hasProducts),p.zb(6),p.qc(p.dc(8,4,i.paymentSum,"PLN","symbol-narrow","1.2")),p.zb(4),p.rc(" ",i.isSummary?"Wy\u015blij zam\xf3wienie":"Podsumowanie"," "))},directives:[c.k,o.i,o.x,o.s,o.g,o.e,o.h,o.k,e.i,o.C,c.j,o.p,o.m,o.o,o.f,o.a,a.d,a.e,o.c],pipes:[c.c,c.f],styles:[".empty-basket-message[_ngcontent-%COMP%]{width:300px;margin:30vh auto;text-align:center;color:grey}.empty-basket-message[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:xx-large}ion-list[_ngcontent-%COMP%]{padding:0;margin-bottom:40px;border-bottom:1px solid #d3d3d3}ion-list[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{width:85px;height:85px}ion-list[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:0}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]:nth-child(odd){--ion-background-color:rgba(0,0,0,0.03)!important}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:100%;height:100%;text-align:center;padding-top:13px}ion-list[_ngcontent-%COMP%]   .supplier[_ngcontent-%COMP%]{border-top:1px solid #d3d3d3;border-bottom:1px solid #d3d3d3}ion-list[_ngcontent-%COMP%]   .multiply[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:0;border:1px solid grey;padding:7px 0;font-size:medium;border-radius:2px}ion-col[_ngcontent-%COMP%]{text-align:center}ion-col[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:large;color:grey;margin-top:11px;margin-bottom:0}"]}),t})()}];let C=(()=>{class t{}return t.\u0275mod=p.Ib({type:t}),t.\u0275inj=p.Hb({factory:function(i){return new(i||t)},imports:[[e.j.forChild(z)],e.j]}),t})(),x=(()=>{class t{}return t.\u0275mod=p.Ib({type:t}),t.\u0275inj=p.Hb({factory:function(i){return new(i||t)},imports:[[o.y,c.b,C,a.a]]}),t})()}}]);
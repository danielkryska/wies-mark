function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[96],{RmqX:function(t,e,n){"use strict";n.r(e),n.d(e,"SearchModule",(function(){return R}));var o=n("PCNd"),r=n("ofXK"),i=n("tyNb"),c=n("mrSG"),a=n("hKYS"),s=n("co2y"),l=n("U5Sr"),u=n("DnKK"),b=n("azmC"),p=n("fXoL"),g=n("TEn/");function f(t,e){if(1&t){var n=p.Qb();p.Pb(0,"ion-item"),p.Pb(1,"ion-label",3),p.Xb("click",(function(){p.lc(n);var t=e.$implicit;return p.Zb(2).closeSelf(t.value)})),p.pc(2),p.Ob(),p.Ob()}if(2&t){var o=e.$implicit;p.zb(2),p.qc(o.label)}}function d(t,e){if(1&t&&(p.Nb(0),p.Pb(1,"ion-item-divider"),p.Pb(2,"ion-label"),p.pc(3),p.Ob(),p.Ob(),p.oc(4,f,3,1,"ion-item",1),p.Mb()),2&t){var n=e.$implicit;p.zb(3),p.qc(n.groupLabel),p.zb(1),p.gc("ngForOf",n.values)}}var h,C,O=((C=function(){function t(e,n){var o=this;_classCallCheck(this,t),this._sortTypesService=e,this._modalController=n,this.sortTypes=[],this.closeSelf=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return o._modalController.dismiss(t)},this._sortTypesService.sortTypes$.pipe(Object(u.a)(this)).subscribe((function(t){return o.sortTypes=t}))}return _createClass(t,[{key:"ngOnDestroy",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||C)(p.Kb(b.a),p.Kb(g.A))},C.\u0275cmp=p.Eb({type:C,selectors:[["app-sort-by"]],decls:9,vars:1,consts:[["lines","none"],[4,"ngFor","ngForOf"],["expand","block",3,"click"],[3,"click"]],template:function(t,e){1&t&&(p.Pb(0,"ion-list",0),p.Pb(1,"ion-list-header"),p.Pb(2,"h3"),p.pc(3,"Sortuj wed\u0142ug"),p.Ob(),p.Ob(),p.oc(4,d,5,2,"ng-container",1),p.Ob(),p.Pb(5,"ion-footer"),p.Pb(6,"ion-toolbar"),p.Pb(7,"ion-button",2),p.Xb("click",(function(){return e.closeSelf()})),p.pc(8,"Cofnij"),p.Ob(),p.Ob(),p.Ob()),2&t&&(p.zb(4),p.gc("ngForOf",e.sortTypes))},directives:[g.p,g.q,r.j,g.i,g.x,g.e,g.n,g.o,g.m],styles:["ion-list[_ngcontent-%COMP%]{padding:0!important}ion-list[_ngcontent-%COMP%]   ion-item-divider[_ngcontent-%COMP%]{--ion-background-color:#e9ecf0!important;color:#000}ion-footer[_ngcontent-%COMP%]{padding:10px}"]}),C),P=((h=function t(e){var n=this;_classCallCheck(this,t),this._modalController=e,this.filters=[],this.applyFilters=function(){},this.closeSelf=function(){return n._modalController.dismiss({dismissed:!0})}}).\u0275fac=function(t){return new(t||h)(p.Kb(g.A))},h.\u0275cmp=p.Eb({type:h,selectors:[["app-filters"]],decls:15,vars:0,consts:[["fullscreen",""],[1,"modal-title"],[1,"close-self-btn",3,"click"],["href","javascript:void(0)"],["name","close-outline"],["position","floating"],["color","primary","expand","block"]],template:function(t,e){1&t&&(p.Pb(0,"ion-content",0),p.Pb(1,"ion-toolbar"),p.Pb(2,"span",1),p.pc(3,"Filtry"),p.Ob(),p.Pb(4,"button",2),p.Xb("click",(function(){return e.closeSelf()})),p.Pb(5,"a",3),p.Lb(6,"ion-icon",4),p.Ob(),p.Ob(),p.Ob(),p.Pb(7,"ion-item"),p.Pb(8,"ion-label",5),p.pc(9,"Floating Label"),p.Ob(),p.Lb(10,"ion-input"),p.Ob(),p.Pb(11,"ion-footer"),p.Pb(12,"ion-toolbar"),p.Pb(13,"ion-button",6),p.pc(14," Filtruj "),p.Ob(),p.Ob(),p.Ob(),p.Ob())},directives:[g.h,g.x,g.k,g.m,g.o,g.l,g.D,g.i,g.e],styles:["ion-content[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{padding:10px}ion-content[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .close-self-btn[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]{background-color:transparent;padding:10px;font-size:larger}ion-content[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .close-self-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-size:larger}ion-content[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .close-self-btn[_ngcontent-%COMP%]{top:0;right:0;position:absolute}ion-content[_ngcontent-%COMP%]   ion-footer[_ngcontent-%COMP%]{bottom:0;position:fixed}"]}),h),v=n("2qjx"),m=n("+Efk"),_=n("ioEP"),y=["searchbar"],k=function(){return["/zakladki/szukaj"]},M=function(t){return{selectedCategory:t}};function j(t,e){if(1&t&&(p.Pb(0,"a",8),p.Pb(1,"ion-item"),p.pc(2),p.Ob(),p.Ob()),2&t){var n=e.$implicit;p.gc("routerLink",p.ic(3,k))("queryParams",p.jc(4,M,n.value)),p.zb(2),p.rc(" ",n.label," ")}}function x(t,e){if(1&t){var n=p.Qb();p.Nb(0),p.Pb(1,"ion-header",1),p.Pb(2,"ion-searchbar",2,3),p.Xb("ionChange",(function(t){return p.lc(n),p.Zb().searchForCategory(t)}))("ionClear",(function(){return p.lc(n),p.Zb().clearProposedCategories()})),p.Ob(),p.Ob(),p.Pb(4,"ion-content"),p.Pb(5,"ion-list",4),p.oc(6,j,3,6,"a",5),p.Ob(),p.Ob(),p.Pb(7,"ion-footer",6),p.Pb(8,"ion-toolbar"),p.Lb(9,"app-categories-bar",7),p.Ob(),p.Ob(),p.Mb()}if(2&t){var o=p.Zb();p.zb(6),p.gc("ngForOf",o.proposedCategories),p.zb(3),p.gc("categories",o.categories)}}function w(t,e){if(1&t){var n=p.Qb();p.Nb(0),p.Pb(1,"ion-header"),p.Pb(2,"ion-toolbar"),p.Pb(3,"ion-row"),p.Pb(4,"ion-col"),p.Pb(5,"button",9),p.Pb(6,"a",10),p.Xb("click",(function(){return p.lc(n),p.Zb().openCategories()})),p.pc(7,"Kategorie"),p.Ob(),p.Ob(),p.Ob(),p.Pb(8,"ion-col"),p.Pb(9,"button",11),p.Xb("click",(function(){return p.lc(n),p.Zb().openFilters()})),p.Pb(10,"a",12),p.pc(11,"Filtry"),p.Ob(),p.Ob(),p.Ob(),p.Pb(12,"ion-col"),p.Pb(13,"button",11),p.Xb("click",(function(){return p.lc(n),p.Zb().openSortBy()})),p.Pb(14,"a",12),p.pc(15,"Sortuj"),p.Ob(),p.Ob(),p.Ob(),p.Ob(),p.Ob(),p.Ob(),p.Pb(16,"ion-content",13),p.Lb(17,"app-products-section",14),p.Ob(),p.Mb()}if(2&t){var o=p.Zb();p.zb(17),p.gc("title","Produkty z kategori: "+o.actualCategory.label)("products",o.marketProducts)}}var S,z,F,K=[{path:"",component:(S=function(){function t(e,n,o,r,i){var c=this;_classCallCheck(this,t),this._productsService=e,this._categoriesService=n,this._modalController=o,this._activatedRoute=r,this._location=i,this.categories=[],this.proposedCategories=[],this._flatCategories=[],this.clearProposedCategories=function(){return c.proposedCategories=[]}}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this._productsService.getProducts$().pipe(Object(u.a)(this)).subscribe((function(e){t.marketProducts=e})),this._categoriesService.categories$.pipe(Object(u.a)(this)).subscribe((function(e){return t.categories=e})),this._activatedRoute.queryParamMap.pipe(Object(u.a)(this)).subscribe((function(e){return Object(c.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){var n,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((n=e.get("selectedCategory"))&&this.actualCategory&&this.actualCategory.value===n||!n)){t.next=3;break}return t.abrupt("return",(this.parentCategory=null,this.actualCategory=null,void(this.proposedCategories=[])));case 3:if(t.t0=n,!t.t0){t.next=13;break}return t.next=7,this._categoriesService.findParentCategoryBy(n);case 7:return this.parentCategory=t.sent,t.next=10,this._categoriesService.findCategoryBy(n);case 10:this.actualCategory=t.sent,this._productsService.getProducts$([function(t){return Object(l.c)(t.category,o.actualCategory)}],s.a).pipe(Object(u.a)(this)).subscribe((function(t){o.marketProducts=t})),this._location.replaceState("zakladki/szukaj");case 13:case"end":return t.stop()}}),t,this)})))})),this._categoriesService.flatCategories$.pipe(Object(u.a)(this)).subscribe((function(e){return t._flatCategories=e}))}},{key:"searchForCategory",value:function(t){var e=t.target.value;e&&""!==e.trim()?this.proposedCategories=this._flatCategories.filter((function(t){return t.label.toLocaleLowerCase().indexOf(e.toLowerCase())>-1})).slice(0,10):this.clearProposedCategories()}},{key:"ionViewDidEnter",value:function(){var t=this;setTimeout((function(){t.searchbar.setFocus()}))}},{key:"openFilters",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._modalController.create({component:P});case 2:return e=t.sent,t.next=5,e.present();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})))}},{key:"openCategories",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._modalController.create({component:a.a,componentProps:{actualCategory:this.parentCategory,categories:this.categories}});case 2:return e=t.sent,t.next=5,e.present();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})))}},{key:"openSortBy",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._modalController.create({component:O});case 2:return(e=t.sent).onDidDismiss().then((function(t){n.actualSortType=t.data,n._productsService.getProducts$(n.actualCategory?[function(t){return Object(l.c)(t.category,n.actualCategory)}]:[],n.actualSortType).pipe(Object(u.a)(n)).subscribe((function(t){n.marketProducts=t}))})),t.next=6,e.present();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})))}},{key:"ngOnDestroy",value:function(){}}]),t}(),S.\u0275fac=function(t){return new(t||S)(p.Kb(v.a),p.Kb(l.a),p.Kb(g.A),p.Kb(i.a),p.Kb(r.h))},S.\u0275cmp=p.Eb({type:S,selectors:[["app-search"]],viewQuery:function(t,e){var n;1&t&&p.tc(y,!0),2&t&&p.kc(n=p.Yb())&&(e.searchbar=n.first)},decls:2,vars:2,consts:[[4,"ngIf"],["no-border",""],["autocomplete","on","autocorrect","on","inputmode","text","placeholder","Jakiego produktu szukasz?","spellcheck","true","debounce","500",3,"ionChange","ionClear"],["searchbar",""],["lines","none"],[3,"routerLink","queryParams",4,"ngFor","ngForOf"],["no-border","","transparent",""],[3,"categories"],[3,"routerLink","queryParams"],[1,"header-btn"],["href","javascript:void(0)",3,"click"],[1,"header-btn",3,"click"],["href","javascript:void(0)"],["fullscreen",""],["sortBy","popularity","filters","[]",3,"title","products"]],template:function(t,e){1&t&&(p.oc(0,x,10,2,"ng-container",0),p.oc(1,w,18,2,"ng-container",0)),2&t&&(p.gc("ngIf",!e.actualCategory),p.zb(1),p.gc("ngIf",!!e.actualCategory))},directives:[r.k,g.j,g.t,g.D,g.h,g.p,r.j,g.i,g.x,m.a,i.i,g.C,g.m,g.s,g.g,_.a],styles:["ion-toolbar[_ngcontent-%COMP%]   .header-btn[_ngcontent-%COMP%]{background-color:transparent}ion-toolbar[_ngcontent-%COMP%]   .header-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-size:larger}ion-toolbar[_ngcontent-%COMP%]   .header-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:large}ion-header[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{text-align:center}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{color:green}"]}),S)}],L=((F=function t(){_classCallCheck(this,t)}).\u0275mod=p.Ib({type:F}),F.\u0275inj=p.Hb({factory:function(t){return new(t||F)},imports:[[i.j.forChild(K)],i.j]}),F),R=((z=function t(){_classCallCheck(this,t)}).\u0275mod=p.Ib({type:z}),z.\u0275inj=p.Hb({factory:function(t){return new(t||z)},imports:[[g.y,r.b,L,o.a]]}),z)}}]);
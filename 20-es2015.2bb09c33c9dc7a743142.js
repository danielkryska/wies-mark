(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{TdLt:function(e,t,s){"use strict";s.r(t),s.d(t,"MessagesModule",(function(){return p}));var n=s("PCNd"),o=s("TEn/"),i=s("mrSG"),c=s("N7YL"),a=s("ZjcB"),r=s("fXoL"),b=s("tyNb"),l=s("ofXK");function u(e,t){if(1&e){const e=r.Rb();r.Qb(0,"ion-item",3),r.Yb("click",(function(){r.kc(e);const s=t.$implicit;return r.ac().openMessage(s)})),r.Qb(1,"ion-badge",4),r.pc(2),r.Pb(),r.Qb(3,"ion-label"),r.Qb(4,"b"),r.pc(5),r.Pb(),r.Qb(6,"p"),r.Qb(7,"small"),r.pc(8),r.bc(9,"date"),r.Pb(),r.Pb(),r.Qb(10,"p"),r.Qb(11,"small"),r.Qb(12,"b"),r.pc(13),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb()}if(2&e){const e=t.$implicit,s=r.ac();r.zb(1),r.hc("color",0===s.unreadCount(e)?"light":"success"),r.zb(1),r.rc(" ",s.unreadCount(e)>9?"+9":s.unreadCount(e)," "),r.zb(3),r.qc(e.user.name),r.zb(3),r.rc("Ostatnia wiadomosc z: ",r.cc(9,5,s.lastMessageTimeInMs(e),"M/d/yy, hh:mm:ss"),""),r.zb(5),r.qc(s.lastMessage(e).content)}}const m=[{path:"",component:(()=>{class e{constructor(e,t,s){this._messagesService=e,this._modalController=t,this._router=s,this.lastMessage=e=>!!e.messages[e.messages.length-1]&&e.messages[e.messages.length-1],this.lastMessageTimeInMs=e=>1e3*this.lastMessage(e).creationDate,this.unreadCount=e=>e.messages.filter(e=>!e.readDate&&e.isResponse).length,this.openMessage=e=>Object(i.a)(this,void 0,void 0,(function*(){const t=yield this._modalController.create({component:a.a,componentProps:{conversation:e}});return e.messages.filter(e=>!e.readDate).forEach(e=>e.readDate=(new Date).getTime()),yield t.present()}))}get conversations(){return this._messagesService.conversations}ngOnInit(){this._router.events.subscribe(()=>{"/zakladki/wiadomosci"===this._router.url&&this.conversations.filter(e=>!e.viewDate).forEach(e=>e.viewDate=(new Date).getTime())})}}return e.\u0275fac=function(t){return new(t||e)(r.Lb(c.a),r.Lb(o.H),r.Lb(b.g))},e.\u0275cmp=r.Fb({type:e,selectors:[["ng-component"]],decls:7,vars:1,consts:[["fullScreen",""],["lines","full"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["slot","start",3,"color"]],template:function(e,t){1&e&&(r.Qb(0,"ion-header"),r.Qb(1,"ion-toolbar"),r.Qb(2,"ion-title"),r.pc(3,"Moje wiadomo\u015bci"),r.Pb(),r.Pb(),r.Pb(),r.Qb(4,"ion-content",0),r.Qb(5,"ion-list",1),r.nc(6,u,14,8,"ion-item",2),r.Pb(),r.Pb()),2&e&&(r.zb(6),r.gc("ngForOf",t.conversations))},directives:[o.l,o.E,o.D,o.j,o.r,l.j,o.o,o.e,o.q],pipes:[l.e],styles:["ion-header[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{padding-left:15px}"]}),e})()}];let d=(()=>{class e{}return e.\u0275mod=r.Jb({type:e}),e.\u0275inj=r.Ib({factory:function(t){return new(t||e)},imports:[[b.j.forChild(m)],b.j]}),e})(),p=(()=>{class e{}return e.\u0275mod=r.Jb({type:e}),e.\u0275inj=r.Ib({factory:function(t){return new(t||e)},imports:[[l.b,o.F,d,n.a]]}),e})()}}]);
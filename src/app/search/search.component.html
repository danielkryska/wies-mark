
<!-- TODO search by category, by writing and choosing -->
<ng-container *ngIf="!actualCategory" >
  <ion-header no-border>
    <ion-searchbar
      #searchbar
      autocomplete="on"
      autocorrect="on"
      inputmode="text"
      placeholder="Jakiego produktu szukasz?"
      spellcheck="true"
      debounce="500"
      (ionChange)="searchForCategory($event)"
      (ionClear)="clearProposedCategories()" 
    ></ion-searchbar>
  </ion-header>

  <ion-content>
    <ion-list lines="none">
      <a
        *ngFor="let category of proposedCategories"
        [routerLink]="['/zakladki/szukaj']" 
        [queryParams]="{selectedCategory: category.value}"
      >
        <ion-item >
          {{ category.label }}
        </ion-item>
      </a>
    </ion-list>
  </ion-content>

  <ion-footer no-border transparent>
    <ion-toolbar>
      <app-categories-bar [categories]="categories">
      </app-categories-bar>
    </ion-toolbar>
  </ion-footer>
</ng-container>

<!-- search with known category, from URL -->
<ng-container *ngIf="!!actualCategory" >
  <ion-header>
    <ion-toolbar>
      <ion-row>
        <ion-col>
          <button class="header-btn" >
            <a href="javascript:void(0)" (click)="openCategories()">Kategorie</a>
          </button>    
        </ion-col>
        <ion-col>
          <button class="header-btn" (click)="openFilters()">
            <a href="javascript:void(0)">Filtry</a>
          </button>
        </ion-col>
        <ion-col>
          <button class="header-btn" (click)="openSortBy()">
            <a href="javascript:void(0)">Sortuj</a>
          </button>
        </ion-col>
      </ion-row>
    </ion-toolbar>
  </ion-header>
  
  <ion-content fullscreen>
      <app-products-section
        [title]="'Produkty z kategori: ' + actualCategory.label"
        [products]="marketProducts"
        sortBy="popularity"
        filters="[]"
      ></app-products-section>
  </ion-content>
</ng-container>
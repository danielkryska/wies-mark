function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[96],{RmqX:function(t,e,n){"use strict";n.r(e),n.d(e,"SearchModule",(function(){return R}));var o=n("PCNd"),r=n("ofXK"),i=n("tyNb"),c=n("mrSG"),a=n("hKYS"),s=n("co2y"),l=n("U5Sr"),u=n("DnKK"),b=n("azmC"),f=n("fXoL"),p=n("TEn/");function g(t,e){if(1&t){var n=f.Qb();f.Pb(0,"ion-item"),f.Pb(1,"ion-label",3),f.Xb("click",(function(){f.kc(n);var t=e.$implicit;return f.Zb(2).closeSelf(t.value)})),f.oc(2),f.Ob(),f.Ob()}if(2&t){var o=e.$implicit;f.zb(2),f.pc(o.label)}}function d(t,e){if(1&t&&(f.Nb(0),f.Pb(1,"ion-item-divider"),f.Pb(2,"ion-label"),f.oc(3),f.Ob(),f.Ob(),f.nc(4,g,3,1,"ion-item",1),f.Mb()),2&t){var n=e.$implicit;f.zb(3),f.pc(n.groupLabel),f.zb(1),f.fc("ngForOf",n.values)}}var h,C,O=((C=function(){function t(e,n){var o=this;_classCallCheck(this,t),this._sortTypesService=e,this._modalController=n,this.sortTypes=[],this.closeSelf=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return o._modalController.dismiss(t)},this._sortTypesService.sortTypes$.pipe(Object(u.a)(this)).subscribe((function(t){return o.sortTypes=t}))}return _createClass(t,[{key:"ngOnDestroy",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||C)(f.Kb(b.a),f.Kb(p.x))},C.\u0275cmp=f.Eb({type:C,selectors:[["app-sort-by"]],decls:9,vars:1,consts:[["lines","none"],[4,"ngFor","ngForOf"],["expand","block",3,"click"],[3,"click"]],template:function(t,e){1&t&&(f.Pb(0,"ion-list",0),f.Pb(1,"ion-list-header"),f.Pb(2,"h3"),f.oc(3,"Sortuj wed\u0142ug"),f.Ob(),f.Ob(),f.nc(4,d,5,2,"ng-container",1),f.Ob(),f.Pb(5,"ion-footer"),f.Pb(6,"ion-toolbar"),f.Pb(7,"ion-button",2),f.Xb("click",(function(){return e.closeSelf()})),f.oc(8,"Cofnij"),f.Ob(),f.Ob(),f.Ob()),2&t&&(f.zb(4),f.fc("ngForOf",e.sortTypes))},directives:[p.m,p.n,r.i,p.f,p.u,p.c,p.k,p.l,p.j],styles:["ion-list[_ngcontent-%COMP%]{padding:0!important}ion-list[_ngcontent-%COMP%]   ion-item-divider[_ngcontent-%COMP%]{--ion-background-color:#e9ecf0!important;color:#000}ion-footer[_ngcontent-%COMP%]{padding:10px}"]}),C),P=((h=function t(e){var n=this;_classCallCheck(this,t),this._modalController=e,this.filters=[],this.applyFilters=function(){},this.closeSelf=function(){return n._modalController.dismiss({dismissed:!0})}}).\u0275fac=function(t){return new(t||h)(f.Kb(p.x))},h.\u0275cmp=f.Eb({type:h,selectors:[["app-filters"]],decls:15,vars:0,consts:[["fullscreen",""],[1,"modal-title"],[1,"close-self-btn",3,"click"],["href","javascript:void(0)"],["name","close-outline"],["position","floating"],["color","primary","expand","block"]],template:function(t,e){1&t&&(f.Pb(0,"ion-content",0),f.Pb(1,"ion-toolbar"),f.Pb(2,"span",1),f.oc(3,"Filtry"),f.Ob(),f.Pb(4,"button",2),f.Xb("click",(function(){return e.closeSelf()})),f.Pb(5,"a",3),f.Lb(6,"ion-icon",4),f.Ob(),f.Ob(),f.Ob(),f.Pb(7,"ion-item"),f.Pb(8,"ion-label",5),f.oc(9,"Floating Label"),f.Ob(),f.Lb(10,"ion-input"),f.Ob(),f.Pb(11,"ion-footer"),f.Pb(12,"ion-toolbar"),f.Pb(13,"ion-button",6),f.oc(14," Filtruj "),f.Ob(),f.Ob(),f.Ob(),f.Ob())},directives:[p.e,p.u,p.h,p.j,p.l,p.i,p.A,p.f,p.c],styles:["ion-content[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{padding:10px}ion-content[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .close-self-btn[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]{background-color:transparent;padding:10px;font-size:larger}ion-content[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .close-self-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-size:larger}ion-content[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .close-self-btn[_ngcontent-%COMP%]{top:0;right:0;position:absolute}ion-content[_ngcontent-%COMP%]   ion-footer[_ngcontent-%COMP%]{bottom:0;position:fixed}"]}),h),v=n("2qjx"),m=n("+Efk"),_=n("ioEP"),y=["searchbar"],k=function(){return["/zakladki/szukaj"]},M=function(t){return{selectedCategory:t}};function j(t,e){if(1&t&&(f.Pb(0,"a",8),f.Pb(1,"ion-item"),f.oc(2),f.Ob(),f.Ob()),2&t){var n=e.$implicit;f.fc("routerLink",f.hc(3,k))("queryParams",f.ic(4,M,n.value)),f.zb(2),f.qc(" ",n.label," ")}}function x(t,e){if(1&t){var n=f.Qb();f.Nb(0),f.Pb(1,"ion-header",1),f.Pb(2,"ion-searchbar",2,3),f.Xb("ionChange",(function(t){return f.kc(n),f.Zb().searchForCategory(t)}))("ionClear",(function(){return f.kc(n),f.Zb().clearProposedCategories()})),f.Ob(),f.Ob(),f.Pb(4,"ion-content"),f.Pb(5,"ion-list",4),f.nc(6,j,3,6,"a",5),f.Ob(),f.Ob(),f.Pb(7,"ion-footer",6),f.Pb(8,"ion-toolbar"),f.Lb(9,"app-categories-bar",7),f.Ob(),f.Ob(),f.Mb()}if(2&t){var o=f.Zb();f.zb(6),f.fc("ngForOf",o.proposedCategories),f.zb(3),f.fc("categories",o.categories)}}function w(t,e){if(1&t){var n=f.Qb();f.Nb(0),f.Pb(1,"ion-header"),f.Pb(2,"ion-toolbar"),f.Pb(3,"ion-row"),f.Pb(4,"ion-col"),f.Pb(5,"button",9),f.Pb(6,"a",10),f.Xb("click",(function(){return f.kc(n),f.Zb().openCategories()})),f.oc(7,"Kategorie"),f.Ob(),f.Ob(),f.Ob(),f.Pb(8,"ion-col"),f.Pb(9,"button",11),f.Xb("click",(function(){return f.kc(n),f.Zb().openFilters()})),f.Pb(10,"a",12),f.oc(11,"Filtry"),f.Ob(),f.Ob(),f.Ob(),f.Pb(12,"ion-col"),f.Pb(13,"button",11),f.Xb("click",(function(){return f.kc(n),f.Zb().openSortBy()})),f.Pb(14,"a",12),f.oc(15,"Sortuj"),f.Ob(),f.Ob(),f.Ob(),f.Ob(),f.Ob(),f.Ob(),f.Pb(16,"ion-content",13),f.Lb(17,"app-products-section",14),f.Ob(),f.Mb()}if(2&t){var o=f.Zb();f.zb(17),f.fc("title","Produkty z kategori: "+o.actualCategory.label)("products",o.marketProducts)}}var S,z,F,K=[{path:"",component:(S=function(){function t(e,n,o,r,i){var c=this;_classCallCheck(this,t),this._productsService=e,this._categoriesService=n,this._modalController=o,this._activatedRoute=r,this._location=i,this.categories=[],this.proposedCategories=[],this._flatCategories=[],this.clearProposedCategories=function(){return c.proposedCategories=[]}}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this._productsService.getProducts().pipe(Object(u.a)(this)).subscribe((function(e){t.marketProducts=e})),this._categoriesService.categories$.pipe(Object(u.a)(this)).subscribe((function(e){return t.categories=e})),this._activatedRoute.queryParamMap.pipe(Object(u.a)(this)).subscribe((function(e){return Object(c.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){var n,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((n=e.get("selectedCategory"))&&this.actualCategory&&this.actualCategory.value===n||!n)){t.next=3;break}return t.abrupt("return",(this.parentCategory=null,void(this.actualCategory=null)));case 3:if(t.t0=n,!t.t0){t.next=13;break}return t.next=7,this._categoriesService.findParentCategoryBy(n);case 7:return this.parentCategory=t.sent,t.next=10,this._categoriesService.findCategoryBy(n);case 10:this.actualCategory=t.sent,this._productsService.getProducts([function(t){return Object(l.c)(t.category,o.actualCategory)}],s.a).pipe(Object(u.a)(this)).subscribe((function(t){o.marketProducts=t})),this._location.replaceState("zakladki/szukaj");case 13:case"end":return t.stop()}}),t,this)})))})),this._categoriesService.flatCategories$.pipe(Object(u.a)(this)).subscribe((function(e){return t._flatCategories=e}))}},{key:"searchForCategory",value:function(t){var e=t.target.value;e&&""!==e.trim()?this.proposedCategories=this._flatCategories.filter((function(t){return t.label.toLocaleLowerCase().indexOf(e)>-1})).slice(0,10):this.clearProposedCategories()}},{key:"ionViewDidEnter",value:function(){var t=this;setTimeout((function(){t.searchbar.setFocus()}))}},{key:"openFilters",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._modalController.create({component:P});case 2:return e=t.sent,t.next=5,e.present();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})))}},{key:"openCategories",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._modalController.create({component:a.a,componentProps:{actualCategory:this.parentCategory,categories:this.categories}});case 2:return e=t.sent,t.next=5,e.present();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})))}},{key:"openSortBy",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._modalController.create({component:O});case 2:return(e=t.sent).onDidDismiss().then((function(t){n.actualSortType=t.data,n._productsService.getProducts(n.actualCategory?[function(t){return Object(l.c)(t.category,n.actualCategory)}]:[],n.actualSortType).pipe(Object(u.a)(n)).subscribe((function(t){n.marketProducts=t}))})),t.next=6,e.present();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})))}},{key:"ngOnDestroy",value:function(){}}]),t}(),S.\u0275fac=function(t){return new(t||S)(f.Kb(v.a),f.Kb(l.a),f.Kb(p.x),f.Kb(i.a),f.Kb(r.g))},S.\u0275cmp=f.Eb({type:S,selectors:[["app-search"]],viewQuery:function(t,e){var n;1&t&&f.sc(y,!0),2&t&&f.jc(n=f.Yb())&&(e.searchbar=n.first)},decls:2,vars:2,consts:[[4,"ngIf"],["no-border",""],["autocomplete","on","autocorrect","on","inputmode","text","placeholder","Jakiego produktu szukasz?","spellcheck","true","debounce","500",3,"ionChange","ionClear"],["searchbar",""],["lines","none"],[3,"routerLink","queryParams",4,"ngFor","ngForOf"],["no-border","","transparent",""],[3,"categories"],[3,"routerLink","queryParams"],[1,"header-btn"],["href","javascript:void(0)",3,"click"],[1,"header-btn",3,"click"],["href","javascript:void(0)"],["fullscreen",""],["sortBy","popularity","filters","[]",3,"title","products"]],template:function(t,e){1&t&&(f.nc(0,x,10,2,"ng-container",0),f.nc(1,w,18,2,"ng-container",0)),2&t&&(f.fc("ngIf",!e.actualCategory),f.zb(1),f.fc("ngIf",!!e.actualCategory))},directives:[r.j,p.g,p.q,p.A,p.e,p.m,r.i,p.f,p.u,m.a,i.i,p.z,p.j,p.p,p.d,_.a],styles:["ion-toolbar[_ngcontent-%COMP%]   .header-btn[_ngcontent-%COMP%]{background-color:transparent}ion-toolbar[_ngcontent-%COMP%]   .header-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-size:larger}ion-toolbar[_ngcontent-%COMP%]   .header-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:large}ion-header[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{text-align:center}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{color:green}"]}),S)}],L=((F=function t(){_classCallCheck(this,t)}).\u0275mod=f.Ib({type:F}),F.\u0275inj=f.Hb({factory:function(t){return new(t||F)},imports:[[i.j.forChild(K)],i.j]}),F),R=((z=function t(){_classCallCheck(this,t)}).\u0275mod=f.Ib({type:z}),z.\u0275inj=f.Hb({factory:function(t){return new(t||z)},imports:[[p.v,r.b,L,o.a]]}),z)}}]);
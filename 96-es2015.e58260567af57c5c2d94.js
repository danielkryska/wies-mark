(window.webpackJsonp=window.webpackJsonp||[]).push([[96],{RmqX:function(t,e,o){"use strict";o.r(e),o.d(e,"SearchModule",(function(){return w}));var n=o("PCNd"),i=o("ofXK"),r=o("tyNb"),c=o("mrSG"),s=o("hKYS"),a=o("co2y"),l=o("U5Sr"),b=o("DnKK"),u=o("azmC"),p=o("fXoL"),g=o("TEn/");function d(t,e){if(1&t){const t=p.Qb();p.Pb(0,"ion-item"),p.Pb(1,"ion-label",3),p.Xb("click",(function(){p.lc(t);const o=e.$implicit;return p.Zb(2).closeSelf(o.value)})),p.pc(2),p.Ob(),p.Ob()}if(2&t){const t=e.$implicit;p.zb(2),p.qc(t.label)}}function h(t,e){if(1&t&&(p.Nb(0),p.Pb(1,"ion-item-divider"),p.Pb(2,"ion-label"),p.pc(3),p.Ob(),p.Ob(),p.oc(4,d,3,1,"ion-item",1),p.Mb()),2&t){const t=e.$implicit;p.zb(3),p.qc(t.groupLabel),p.zb(1),p.gc("ngForOf",t.values)}}let O=(()=>{class t{constructor(t,e){this._sortTypesService=t,this._modalController=e,this.sortTypes=[],this.closeSelf=(t=null)=>this._modalController.dismiss(t),this._sortTypesService.sortTypes$.pipe(Object(b.a)(this)).subscribe(t=>this.sortTypes=t)}ngOnDestroy(){}}return t.\u0275fac=function(e){return new(e||t)(p.Kb(u.a),p.Kb(g.A))},t.\u0275cmp=p.Eb({type:t,selectors:[["app-sort-by"]],decls:9,vars:1,consts:[["lines","none"],[4,"ngFor","ngForOf"],["expand","block",3,"click"],[3,"click"]],template:function(t,e){1&t&&(p.Pb(0,"ion-list",0),p.Pb(1,"ion-list-header"),p.Pb(2,"h3"),p.pc(3,"Sortuj wed\u0142ug"),p.Ob(),p.Ob(),p.oc(4,h,5,2,"ng-container",1),p.Ob(),p.Pb(5,"ion-footer"),p.Pb(6,"ion-toolbar"),p.Pb(7,"ion-button",2),p.Xb("click",(function(){return e.closeSelf()})),p.pc(8,"Cofnij"),p.Ob(),p.Ob(),p.Ob()),2&t&&(p.zb(4),p.gc("ngForOf",e.sortTypes))},directives:[g.p,g.q,i.j,g.i,g.x,g.e,g.n,g.o,g.m],styles:["ion-list[_ngcontent-%COMP%]{padding:0!important}ion-list[_ngcontent-%COMP%]   ion-item-divider[_ngcontent-%COMP%]{--ion-background-color:#e9ecf0!important;color:#000}ion-footer[_ngcontent-%COMP%]{padding:10px}"]}),t})(),P=(()=>{class t{constructor(t){this._modalController=t,this.filters=[],this.applyFilters=()=>{},this.closeSelf=()=>this._modalController.dismiss({dismissed:!0})}}return t.\u0275fac=function(e){return new(e||t)(p.Kb(g.A))},t.\u0275cmp=p.Eb({type:t,selectors:[["app-filters"]],decls:15,vars:0,consts:[["fullscreen",""],[1,"modal-title"],[1,"close-self-btn",3,"click"],["href","javascript:void(0)"],["name","close-outline"],["position","floating"],["color","primary","expand","block"]],template:function(t,e){1&t&&(p.Pb(0,"ion-content",0),p.Pb(1,"ion-toolbar"),p.Pb(2,"span",1),p.pc(3,"Filtry"),p.Ob(),p.Pb(4,"button",2),p.Xb("click",(function(){return e.closeSelf()})),p.Pb(5,"a",3),p.Lb(6,"ion-icon",4),p.Ob(),p.Ob(),p.Ob(),p.Pb(7,"ion-item"),p.Pb(8,"ion-label",5),p.pc(9,"Floating Label"),p.Ob(),p.Lb(10,"ion-input"),p.Ob(),p.Pb(11,"ion-footer"),p.Pb(12,"ion-toolbar"),p.Pb(13,"ion-button",6),p.pc(14," Filtruj "),p.Ob(),p.Ob(),p.Ob(),p.Ob())},directives:[g.h,g.x,g.k,g.m,g.o,g.l,g.D,g.i,g.e],styles:["ion-content[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{padding:10px}ion-content[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .close-self-btn[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]{background-color:transparent;padding:10px;font-size:larger}ion-content[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .close-self-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-size:larger}ion-content[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .close-self-btn[_ngcontent-%COMP%]{top:0;right:0;position:absolute}ion-content[_ngcontent-%COMP%]   ion-footer[_ngcontent-%COMP%]{bottom:0;position:fixed}"]}),t})();var f=o("2qjx"),C=o("+Efk"),y=o("ioEP");const m=["searchbar"],_=function(){return["/zakladki/szukaj"]},v=function(t){return{selectedCategory:t}};function M(t,e){if(1&t&&(p.Pb(0,"a",8),p.Pb(1,"ion-item"),p.pc(2),p.Ob(),p.Ob()),2&t){const t=e.$implicit;p.gc("routerLink",p.ic(3,_))("queryParams",p.jc(4,v,t.value)),p.zb(2),p.rc(" ",t.label," ")}}function k(t,e){if(1&t){const t=p.Qb();p.Nb(0),p.Pb(1,"ion-header",1),p.Pb(2,"ion-searchbar",2,3),p.Xb("ionChange",(function(e){return p.lc(t),p.Zb().searchForCategory(e)}))("ionClear",(function(){return p.lc(t),p.Zb().clearProposedCategories()})),p.Ob(),p.Ob(),p.Pb(4,"ion-content"),p.Pb(5,"ion-list",4),p.oc(6,M,3,6,"a",5),p.Ob(),p.Ob(),p.Pb(7,"ion-footer",6),p.Pb(8,"ion-toolbar"),p.Lb(9,"app-categories-bar",7),p.Ob(),p.Ob(),p.Mb()}if(2&t){const t=p.Zb();p.zb(6),p.gc("ngForOf",t.proposedCategories),p.zb(3),p.gc("categories",t.categories)}}function j(t,e){if(1&t){const t=p.Qb();p.Nb(0),p.Pb(1,"ion-header"),p.Pb(2,"ion-toolbar"),p.Pb(3,"ion-row"),p.Pb(4,"ion-col"),p.Pb(5,"button",9),p.Pb(6,"a",10),p.Xb("click",(function(){return p.lc(t),p.Zb().openCategories()})),p.pc(7,"Kategorie"),p.Ob(),p.Ob(),p.Ob(),p.Pb(8,"ion-col"),p.Pb(9,"button",11),p.Xb("click",(function(){return p.lc(t),p.Zb().openFilters()})),p.Pb(10,"a",12),p.pc(11,"Filtry"),p.Ob(),p.Ob(),p.Ob(),p.Pb(12,"ion-col"),p.Pb(13,"button",11),p.Xb("click",(function(){return p.lc(t),p.Zb().openSortBy()})),p.Pb(14,"a",12),p.pc(15,"Sortuj"),p.Ob(),p.Ob(),p.Ob(),p.Ob(),p.Ob(),p.Ob(),p.Pb(16,"ion-content",13),p.Lb(17,"app-products-section",14),p.Ob(),p.Mb()}if(2&t){const t=p.Zb();p.zb(17),p.gc("title","Produkty z kategori: "+t.actualCategory.label)("products",t.marketProducts)}}const S=[{path:"",component:(()=>{class t{constructor(t,e,o,n,i){this._productsService=t,this._categoriesService=e,this._modalController=o,this._activatedRoute=n,this._location=i,this.categories=[],this.proposedCategories=[],this._flatCategories=[],this.clearProposedCategories=()=>this.proposedCategories=[]}ngOnInit(){this._productsService.getProducts$().pipe(Object(b.a)(this)).subscribe(t=>{this.marketProducts=t}),this._categoriesService.categories$.pipe(Object(b.a)(this)).subscribe(t=>this.categories=t),this._activatedRoute.queryParamMap.pipe(Object(b.a)(this)).subscribe(t=>Object(c.a)(this,void 0,void 0,(function*(){const e=t.get("selectedCategory");if(e&&this.actualCategory&&this.actualCategory.value===e||!e)return this.parentCategory=null,this.actualCategory=null,void(this.proposedCategories=[]);e&&(this.parentCategory=yield this._categoriesService.findParentCategoryBy(e),this.actualCategory=yield this._categoriesService.findCategoryBy(e),this._productsService.getProducts$([t=>Object(l.c)(t.category,this.actualCategory)],a.a).pipe(Object(b.a)(this)).subscribe(t=>{this.marketProducts=t}),this._location.replaceState("zakladki/szukaj"))}))),this._categoriesService.flatCategories$.pipe(Object(b.a)(this)).subscribe(t=>this._flatCategories=t)}searchForCategory(t){const e=t.target.value;e&&""!==e.trim()?this.proposedCategories=this._flatCategories.filter(t=>t.label.toLocaleLowerCase().indexOf(e.toLowerCase())>-1).slice(0,10):this.clearProposedCategories()}ionViewDidEnter(){setTimeout(()=>{this.searchbar.setFocus()})}openFilters(){return Object(c.a)(this,void 0,void 0,(function*(){const t=yield this._modalController.create({component:P});return yield t.present()}))}openCategories(){return Object(c.a)(this,void 0,void 0,(function*(){const t=yield this._modalController.create({component:s.a,componentProps:{actualCategory:this.parentCategory,categories:this.categories}});return yield t.present()}))}openSortBy(){return Object(c.a)(this,void 0,void 0,(function*(){const t=yield this._modalController.create({component:O});return t.onDidDismiss().then(t=>{this.actualSortType=t.data,this._productsService.getProducts$(this.actualCategory?[t=>Object(l.c)(t.category,this.actualCategory)]:[],this.actualSortType).pipe(Object(b.a)(this)).subscribe(t=>{this.marketProducts=t})}),yield t.present()}))}ngOnDestroy(){}}return t.\u0275fac=function(e){return new(e||t)(p.Kb(f.a),p.Kb(l.a),p.Kb(g.A),p.Kb(r.a),p.Kb(i.h))},t.\u0275cmp=p.Eb({type:t,selectors:[["app-search"]],viewQuery:function(t,e){var o;1&t&&p.tc(m,!0),2&t&&p.kc(o=p.Yb())&&(e.searchbar=o.first)},decls:2,vars:2,consts:[[4,"ngIf"],["no-border",""],["autocomplete","on","autocorrect","on","inputmode","text","placeholder","Jakiego produktu szukasz?","spellcheck","true","debounce","500",3,"ionChange","ionClear"],["searchbar",""],["lines","none"],[3,"routerLink","queryParams",4,"ngFor","ngForOf"],["no-border","","transparent",""],[3,"categories"],[3,"routerLink","queryParams"],[1,"header-btn"],["href","javascript:void(0)",3,"click"],[1,"header-btn",3,"click"],["href","javascript:void(0)"],["fullscreen",""],["sortBy","popularity","filters","[]",3,"title","products"]],template:function(t,e){1&t&&(p.oc(0,k,10,2,"ng-container",0),p.oc(1,j,18,2,"ng-container",0)),2&t&&(p.gc("ngIf",!e.actualCategory),p.zb(1),p.gc("ngIf",!!e.actualCategory))},directives:[i.k,g.j,g.t,g.D,g.h,g.p,i.j,g.i,g.x,C.a,r.i,g.C,g.m,g.s,g.g,y.a],styles:["ion-toolbar[_ngcontent-%COMP%]   .header-btn[_ngcontent-%COMP%]{background-color:transparent}ion-toolbar[_ngcontent-%COMP%]   .header-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-size:larger}ion-toolbar[_ngcontent-%COMP%]   .header-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:large}ion-header[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{text-align:center}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{color:green}"]}),t})()}];let z=(()=>{class t{}return t.\u0275mod=p.Ib({type:t}),t.\u0275inj=p.Hb({factory:function(e){return new(e||t)},imports:[[r.j.forChild(S)],r.j]}),t})(),w=(()=>{class t{}return t.\u0275mod=p.Ib({type:t}),t.\u0275inj=p.Hb({factory:function(e){return new(e||t)},imports:[[g.y,i.b,z,n.a]]}),t})()}}]);